(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[204],{219:(e,t,r)=>{(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function a(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r);return(t>>>0).toString(16)}t.r(n),t.d(n,{AITextArea:()=>Nt,AITextInput:()=>Ct,ASSISTANT_PLUGIN_ID:()=>G,ASSISTANT_PLUGIN_TITLE:()=>W,CALLBACK_EXTENSION_POINT:()=>q,ComponentNodeData:()=>y,DashboardNodeData:()=>R,DatasourceNodeData:()=>x,EntityNodeData:()=>X,FolderNodeData:()=>w,LabelNameNodeData:()=>S,LabelValueNodeData:()=>T,OpenAssistantButton:()=>Pt,StructuredNodeData:()=>i,closeAssistant:()=>B,createAssistantContextItem:()=>k,ensureInlineAssistantInitialized:()=>xt,getExposeAssistantFunctionsConfig:()=>V,getInlineAssistantFactory:()=>Xt,isAssistantAvailable:()=>Y,newFunctionNamespace:()=>U,openAssistant:()=>H,provideComponents:()=>Q,providePageContext:()=>m,provideQuestions:()=>N,setInlineAssistantFactory:()=>Rt,setInlineAssistantInitializer:()=>wt,toggleAssistant:()=>K,useAssistant:()=>J,useInlineAssistant:()=>St,usePageComponents:()=>E,usePageContext:()=>P,useProvidePageContext:()=>$,useProvideQuestions:()=>D,useQuestions:()=>I});class o{constructor(e){this.params=e,this.text="",this.id=a(e.id),this.type=e.type}formatForLLM(e){var t,r;return{type:this.type,codeElementIds:e,data:{name:null!==(t=this.params.text)&&void 0!==t?t:"",text:null!==(r=this.params.text)&&void 0!==r?r:""}}}equals(e){return e instanceof o&&this.id===e.id&&this.type===e.type}}class i extends o{constructor(e){super({...e,id:a(JSON.stringify(e.data)),type:"structured"}),this.data=e.data}formatForLLM(e){return{type:this.type,codeElementIds:e,data:this.data}}}const s=r(8531),l=r(5959);var u=t.n(l);const c="__grafanaAssistantPageContextRegistry__",O="grafana-assistant:page-context-registry-changed",d="grafana-assistant:page-context-update",h="grafana-assistant:page-context-remove",p="grafana-assistant:page-context-sync";function f(){return window[c]}function v(e,t=!1){window[c]=e,window.dispatchEvent(new CustomEvent(O)),t||window.dispatchEvent(new CustomEvent(p,{detail:{registry:e}}))}window[c]||(window[c]=[]);let g=!1;function m(e,t){const r={id:_(),urlPattern:e,context:[...t]};v([...f(),r]),window.dispatchEvent(new CustomEvent(d,{detail:r}));const n=e=>{const t=f(),n=t.findIndex(e=>e.id===r.id);if(-1!==n){const r=[...t];r[n]={...r[n],context:[...e]},v(r),window.dispatchEvent(new CustomEvent(d,{detail:r[n]}))}};return n.unregister=()=>{const e=f(),t=e.findIndex(e=>e.id===r.id);-1!==t&&(v(e.filter((e,r)=>r!==t)),window.dispatchEvent(new CustomEvent(h,{detail:{id:r.id}})))},n}function $(e,t=[]){const r=(0,l.useRef)(void 0),n=(0,l.useRef)(t);return n.current=t,(0,l.useEffect)(()=>(r.current=m(e,n.current),()=>{var e;null===(e=r.current)||void 0===e||e.unregister()}),[e]),(0,l.useEffect)(()=>{r.current&&r.current(t)},[t]),(0,l.useCallback)(e=>{var t;null===(t=r.current)||void 0===t||t.call(r,e)},[])}function P(e={allowQuestions:!1,allowComponents:!1}){const[t,r]=(0,l.useState)([]),n=(0,s.useLocationService)(),a=(0,l.useRef)("");(0,l.useEffect)(()=>{const e=()=>{const e=function(e){if(!e)return[];const t=[],r=f();for(const n of r)b(e,n.urlPattern)&&t.push(...n.context);return t}(n.getLocation().pathname);r(e)},t=()=>{e()},o=n.getLocationObservable().subscribe(t=>{const r=t.pathname;r!==a.current&&(a.current=r,e())});return window.addEventListener(O,t),window.addEventListener(d,t),window.addEventListener(h,t),window.addEventListener(p,t),e(),()=>{o.unsubscribe(),window.removeEventListener(O,t),window.removeEventListener(d,t),window.removeEventListener(h,t),window.removeEventListener(p,t)}},[n]);let o=t;return e.allowQuestions||(o=o.filter(e=>{var t;return"question"!==(null===(t=e.node.data)||void 0===t?void 0:t.type)})),e.allowComponents||(o=o.filter(e=>{var t;return"component"!==(null===(t=e.node.data)||void 0===t?void 0:t.type)})),o}function _(e="page-context"){return`${e}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function b(e,t){if(t instanceof RegExp)return t.test(e);if("string"==typeof t){const r=t.replace(/\*\*/g,"\0DOUBLE_STAR\0").replace(/\*/g,"[^/]*").replace(/\u0000DOUBLE_STAR\u0000/g,".*").replace(/\?/g,".");return new RegExp(`^${r}$`).test(e)}return!1}g||(g=!0,window.addEventListener(d,e=>{const t=e.detail;if(!t||!t.id)return;const r=f(),n=r.findIndex(e=>e.id===t.id);if(-1!==n){const e=[...r];e[n]=t,v(e,!0)}else v([...r,t],!0)}),window.addEventListener(h,e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.id;if(!r)return;const n=f(),a=n.findIndex(e=>e.id===r);-1!==a&&v(n.filter((e,t)=>t!==a),!0)}),window.addEventListener(p,e=>{var t;const r=null===(t=e.detail)||void 0===t?void 0:t.registry;if(!Array.isArray(r))return;const n=f(),a=new Set(n.map(e=>e.id)),o=r.filter(e=>!a.has(e.id));o.length>0&&v([...n,...o],!0)}));class y extends o{constructor(e){const t=e.namespace||"components";super({...e,id:`${t}-${Object.keys(e.components).join("-")}`,type:"component"}),this.components=e.components,this.prompt=e.prompt,this.namespace=t}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:`${this.namespace} components`,prompt:this.prompt,namespace:this.namespace}}}}function E(){const e=P({allowComponents:!0,allowQuestions:!1});return(0,l.useMemo)(()=>{const t={};return e.filter(e=>{var t;return null===(t=e.node.data)||void 0===t?void 0:t.components}).forEach(e=>{const r=e.node.data;if((null==r?void 0:r.components)&&Object.keys(r.components).length>0){const e=r.namespace||r.name||"components";Object.entries(r.components).forEach(([r,n])=>{t[`${e}_${r}`]=n})}}),t},[e])}function Q(e,t,r,n=/.*/){if((a=n)instanceof RegExp?".*"===a.source&&""===a.flags:".*"===a||"/.*/"===a){const n=m(/.*/,[k("component",{components:r,prompt:e,namespace:t})]),a=(e,r)=>{n([k("component",{components:e,prompt:r,namespace:t})])};return a.unregister=n.unregister,a}var a;const o=m(/.*/,[k("component",{components:r,prompt:"",namespace:t})]),i=m(n,[k("component",{components:{},prompt:e,namespace:t})]),s=(e,r)=>{o([k("component",{components:e,prompt:"",namespace:t})]),i([k("component",{components:{},prompt:r,namespace:t})])};return s.unregister=()=>{o.unregister(),i.unregister()},s}class R extends o{constructor(e){super({...e,id:e.dashboardUid,type:"dashboard"}),this.dashboardUid=e.dashboardUid,this.dashboardTitle=e.dashboardTitle,this.folderUid=e.folderUid,this.folderTitle=e.folderTitle,this.text=e.dashboardTitle}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:this.dashboardTitle,dashboardUid:this.dashboardUid,dashboardTitle:this.dashboardTitle,folderUid:this.folderUid,folderTitle:this.folderTitle,text:this.text}}}}class w extends o{constructor(e){super({...e,id:e.folderUid,type:"dashboard_folder"}),this.text="",this.folderUid=e.folderUid,this.folderTitle=e.folderTitle,this.text=e.folderTitle}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:this.folderTitle,folderUid:this.folderUid,folderTitle:this.folderTitle,text:this.text}}}}class x extends o{constructor(e){super({...e,id:e.datasourceUid,type:"datasource"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.img=e.img,this.text=e.datasourceName}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:this.datasourceName,uid:this.datasourceUid,type:this.datasourceType,text:this.text,img:this.img}}}}class X extends o{constructor(e){var t,r,n;super({id:`${e.type}-${e.name}-${[null===(t=e.scope)||void 0===t?void 0:t.env,null===(r=e.scope)||void 0===r?void 0:r.site,null===(n=e.scope)||void 0===n?void 0:n.namespace].filter(Boolean).join("-")}`,type:"entity",title:e.title,hidden:e.hidden,img:e.img,icon:e.icon,text:e.name}),this.entityType=e.type,this.name=e.name,this.scope=e.scope,this.properties=e.properties,this.text=e.name}formatForLLM(e){return{type:"entity",codeElementIds:e,data:{name:this.name,text:this.text,type:this.entityType,scope:this.scope,properties:this.properties}}}}class S extends o{constructor(e){super({...e,id:`${e.datasourceUid}-${e.labelName}`,type:"label_name"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.labelName=e.labelName,this.text=e.labelName,this.img=e.img}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:this.labelName,datasourceUid:this.datasourceUid,datasourceType:this.datasourceType,datasourceName:this.datasourceName,labelName:this.labelName,img:this.img,text:this.text}}}}class T extends o{constructor(e){super({...e,id:`${e.datasourceUid}-${e.labelName}-${e.labelValue}`,type:"label_value"}),this.datasourceUid=e.datasourceUid,this.datasourceType=e.datasourceType,this.datasourceName=e.datasourceName,this.labelName=e.labelName,this.labelValue=e.labelValue,this.text=e.labelValue,this.img=e.img}formatForLLM(e){return{type:this.type,codeElementIds:e,data:{name:this.labelValue,datasourceUid:this.datasourceUid,datasourceType:this.datasourceType,datasourceName:this.datasourceName,labelName:this.labelName,labelValue:this.labelValue,text:this.text,img:this.img}}}}function A(e){var t,r,n,a,o;const i=(0,s.getDataSourceSrv)().getInstanceSettings(e);return{datasourceType:null!==(t=null==i?void 0:i.type)&&void 0!==t?t:"unknown",datasourceName:null!==(r=null==i?void 0:i.name)&&void 0!==r?r:e,img:null===(o=null===(a=null===(n=null==i?void 0:i.meta)||void 0===n?void 0:n.info)||void 0===a?void 0:a.logos)||void 0===o?void 0:o.small}}const C={datasource:"database",label_name:"database",label_value:"database",dashboard:"dashboard",dashboard_folder:"folder",unknown:"circle-mono",structured:"gf-grid",component:"gf-grid",entity:"asserts"};function k(e,t){var r,n,a;const s=function(e,t){switch(e){case"datasource":return new x({...t,...A(t.datasourceUid)});case"label_name":return new S({...t,...A(t.datasourceUid)});case"label_value":return new T({...t,...A(t.datasourceUid)});case"dashboard":return new R(t);case"dashboard_folder":return new w(t);case"structured":return new i(t);case"component":return new y({...t,hidden:!0});case"entity":return new X(t);case"unknown":return new o(t);default:return console.error(`Unknown context type: ${e}`),new o(t)}}(e,t),l=null!==(r=t.title)&&void 0!==r?r:function(e){var t;return e instanceof i?e.formatForLLM().data.name:null!==(t=e.text)&&void 0!==t?t:"Given Context"}(s),u=null!==(n=t.img)&&void 0!==n?n:function(e){if("img"in e)return e.img}(s);return{node:{id:s.id,name:l,img:u,icon:null!==(a=t.icon)&&void 0!==a?a:C[e],navigable:!1,selectable:!0,data:s},occurrences:[]}}function N(e,t){const r=_("question"),n=e=>e.map((e,t)=>({node:{id:`question-${r}-${t}`,name:e.prompt,navigable:!1,selectable:!0,icon:"question-circle",data:{type:"question",prompt:e.prompt,context:e.context||[]}},occurrences:[]})),a=m(e,n(t)),o=e=>{a(n(e))};return o.unregister=a.unregister,o}function D(e,t=[]){const r=(0,l.useMemo)(()=>_("question"),[]),n=e=>e.map((e,t)=>({node:{id:`question-${r}-${t}`,name:e.prompt,navigable:!1,selectable:!0,icon:"question-circle",data:{type:"question",prompt:e.prompt,context:e.context||[]}},occurrences:[]})),a=$(e,n(t));return e=>{a(n(e))}}function I(){const e=P({allowQuestions:!0,allowComponents:!1});return L(e)}const L=e=>e.filter(e=>{var t;return"question"===(null===(t=e.node.data)||void 0===t?void 0:t.type)}).map(e=>{var t,r;return{prompt:(null===(t=e.node.data)||void 0===t?void 0:t.prompt)||e.node.name,context:(null===(r=e.node.data)||void 0===r?void 0:r.context)||[]}}),q="grafana-assistant-app/callback/v0-alpha";function U(e,t){return{namespace:e,functions:t}}function V(e){return{title:"callback",targets:[q],fn:()=>e.map(e=>({namespace:e.namespace,functions:e.functions}))}}const j=r(1269),G="grafana-assistant-app",W="Grafana Assistant";function Y(){return s.getObservablePluginLinks?(0,s.getObservablePluginLinks)({extensionPointId:"grafana/extension-sidebar/v0-alpha"}).pipe((0,j.map)(e=>e.some(e=>e.pluginId===G&&e.title===W))):(0,j.of)(!1)}const z=r(7781);class Z extends z.BusEventWithPayload{}Z.type="open-extension-sidebar";class F extends z.BusEventBase{}F.type="close-extension-sidebar";class M extends z.BusEventWithPayload{}function H(e){var t,r;(0,s.reportInteraction)("grafana_assistant_app_opened_sidebar",{from:e.origin,prompt:null!==(t=e.prompt)&&void 0!==t?t:""}),function(e,t,r){const n=new Z({pluginId:e,componentTitle:t,props:r});(0,s.getAppEvents)().publish(n)}(G,W,{initialPrompt:e.prompt,initialContext:e.context,initialAutoSend:null===(r=e.autoSend)||void 0===r||r,origin:e.origin,initialMode:e.mode})}function B(){!function(){const e=new F;(0,s.getAppEvents)().publish(e)}()}function K(e){var t,r;(0,s.reportInteraction)("grafana_assistant_app_toggled_sidebar",{from:e.origin,prompt:null!==(t=e.prompt)&&void 0!==t?t:""}),function(e,t,r){const n=new M({pluginId:e,componentTitle:t,props:r});(0,s.getAppEvents)().publish(n)}(G,W,{initialPrompt:e.prompt,initialContext:e.context,initialAutoSend:null===(r=e.autoSend)||void 0===r||r,origin:e.origin,initialMode:e.mode})}function J(){const[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{const e=Y().subscribe(e=>t(e));return()=>{e.unsubscribe()}},[]),{isAvailable:e,openAssistant:e?H:void 0,closeAssistant:e?B:void 0,toggleAssistant:e?K:void 0}}M.type="toggle-extension-sidebar";const ee=r(2007);var te=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),re=Math.abs,ne=String.fromCharCode,ae=Object.assign;function oe(e){return e.trim()}function ie(e,t,r){return e.replace(t,r)}function se(e,t){return e.indexOf(t)}function le(e,t){return 0|e.charCodeAt(t)}function ue(e,t,r){return e.slice(t,r)}function ce(e){return e.length}function Oe(e){return e.length}function de(e,t){return t.push(e),e}var he=1,pe=1,fe=0,ve=0,ge=0,me="";function $e(e,t,r,n,a,o,i){return{value:e,root:t,parent:r,type:n,props:a,children:o,line:he,column:pe,length:i,return:""}}function Pe(e,t){return ae($e("",null,null,"",null,null,0),e,{length:-e.length},t)}function _e(){return ge=ve>0?le(me,--ve):0,pe--,10===ge&&(pe=1,he--),ge}function be(){return ge=ve<fe?le(me,ve++):0,pe++,10===ge&&(pe=1,he++),ge}function ye(){return le(me,ve)}function Ee(){return ve}function Qe(e,t){return ue(me,e,t)}function Re(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function we(e){return he=pe=1,fe=ce(me=e),ve=0,[]}function xe(e){return me="",e}function Xe(e){return oe(Qe(ve-1,Ae(91===e?e+2:40===e?e+1:e)))}function Se(e){for(;(ge=ye())&&ge<33;)be();return Re(e)>2||Re(ge)>3?"":" "}function Te(e,t){for(;--t&&be()&&!(ge<48||ge>102||ge>57&&ge<65||ge>70&&ge<97););return Qe(e,Ee()+(t<6&&32==ye()&&32==be()))}function Ae(e){for(;be();)switch(ge){case e:return ve;case 34:case 39:34!==e&&39!==e&&Ae(ge);break;case 40:41===e&&Ae(e);break;case 92:be()}return ve}function Ce(e,t){for(;be()&&e+ge!==57&&(e+ge!==84||47!==ye()););return"/*"+Qe(t,ve-1)+"*"+ne(47===e?e:be())}function ke(e){for(;!Re(ye());)be();return Qe(e,ve)}var Ne="-ms-",De="-moz-",Ie="-webkit-",Le="comm",qe="rule",Ue="decl",Ve="@keyframes";function je(e,t){for(var r="",n=Oe(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function Ge(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Ue:return e.return=e.return||e.value;case Le:return"";case Ve:return e.return=e.value+"{"+je(e.children,n)+"}";case qe:e.value=e.props.join(",")}return ce(r=je(e.children,n))?e.return=e.value+"{"+r+"}":""}function We(e){return xe(Ye("",null,null,null,[""],e=we(e),0,[0],e))}function Ye(e,t,r,n,a,o,i,s,l){for(var u=0,c=0,O=i,d=0,h=0,p=0,f=1,v=1,g=1,m=0,$="",P=a,_=o,b=n,y=$;v;)switch(p=m,m=be()){case 40:if(108!=p&&58==le(y,O-1)){-1!=se(y+=ie(Xe(m),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:y+=Xe(m);break;case 9:case 10:case 13:case 32:y+=Se(p);break;case 92:y+=Te(Ee()-1,7);continue;case 47:switch(ye()){case 42:case 47:de(Ze(Ce(be(),Ee()),t,r),l);break;default:y+="/"}break;case 123*f:s[u++]=ce(y)*g;case 125*f:case 59:case 0:switch(m){case 0:case 125:v=0;case 59+c:-1==g&&(y=ie(y,/\f/g,"")),h>0&&ce(y)-O&&de(h>32?Fe(y+";",n,r,O-1):Fe(ie(y," ","")+";",n,r,O-2),l);break;case 59:y+=";";default:if(de(b=ze(y,t,r,u,c,a,s,$,P=[],_=[],O),o),123===m)if(0===c)Ye(y,t,b,b,P,o,O,s,_);else switch(99===d&&110===le(y,3)?100:d){case 100:case 108:case 109:case 115:Ye(e,b,b,n&&de(ze(e,b,b,0,0,a,s,$,a,P=[],O),_),a,_,O,s,n?P:_);break;default:Ye(y,b,b,b,[""],_,0,s,_)}}u=c=h=0,f=g=1,$=y="",O=i;break;case 58:O=1+ce(y),h=p;default:if(f<1)if(123==m)--f;else if(125==m&&0==f++&&125==_e())continue;switch(y+=ne(m),m*f){case 38:g=c>0?1:(y+="\f",-1);break;case 44:s[u++]=(ce(y)-1)*g,g=1;break;case 64:45===ye()&&(y+=Xe(be())),d=ye(),c=O=ce($=y+=ke(Ee())),m++;break;case 45:45===p&&2==ce(y)&&(f=0)}}return o}function ze(e,t,r,n,a,o,i,s,l,u,c){for(var O=a-1,d=0===a?o:[""],h=Oe(d),p=0,f=0,v=0;p<n;++p)for(var g=0,m=ue(e,O+1,O=re(f=i[p])),$=e;g<h;++g)($=oe(f>0?d[g]+" "+m:ie(m,/&\f/g,d[g])))&&(l[v++]=$);return $e(e,t,r,0===a?qe:s,l,u,c)}function Ze(e,t,r){return $e(e,t,r,Le,ne(ge),ue(e,2,-2),0)}function Fe(e,t,r,n){return $e(e,t,r,Ue,ue(e,0,n),ue(e,n+1,-1),n)}var Me=function(e,t,r){for(var n=0,a=0;n=a,a=ye(),38===n&&12===a&&(t[r]=1),!Re(a);)be();return Qe(e,ve)},He=new WeakMap,Be=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||He.get(r))&&!n){He.set(e,!0);for(var a=[],o=function(e,t){return xe(function(e,t){var r=-1,n=44;do{switch(Re(n)){case 0:38===n&&12===ye()&&(t[r]=1),e[r]+=Me(ve-1,t,r);break;case 2:e[r]+=Xe(n);break;case 4:if(44===n){e[++r]=58===ye()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=ne(n)}}while(n=be());return e}(we(e),t))}(t,a),i=r.props,s=0,l=0;s<o.length;s++)for(var u=0;u<i.length;u++,l++)e.props[l]=a[s]?o[s].replace(/&\f/g,i[u]):i[u]+" "+o[s]}}},Ke=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Je(e,t){switch(function(e,t){return 45^le(e,0)?(((t<<2^le(e,0))<<2^le(e,1))<<2^le(e,2))<<2^le(e,3):0}(e,t)){case 5103:return Ie+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ie+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ie+e+De+e+Ne+e+e;case 6828:case 4268:return Ie+e+Ne+e+e;case 6165:return Ie+e+Ne+"flex-"+e+e;case 5187:return Ie+e+ie(e,/(\w+).+(:[^]+)/,Ie+"box-$1$2"+Ne+"flex-$1$2")+e;case 5443:return Ie+e+Ne+"flex-item-"+ie(e,/flex-|-self/,"")+e;case 4675:return Ie+e+Ne+"flex-line-pack"+ie(e,/align-content|flex-|-self/,"")+e;case 5548:return Ie+e+Ne+ie(e,"shrink","negative")+e;case 5292:return Ie+e+Ne+ie(e,"basis","preferred-size")+e;case 6060:return Ie+"box-"+ie(e,"-grow","")+Ie+e+Ne+ie(e,"grow","positive")+e;case 4554:return Ie+ie(e,/([^-])(transform)/g,"$1"+Ie+"$2")+e;case 6187:return ie(ie(ie(e,/(zoom-|grab)/,Ie+"$1"),/(image-set)/,Ie+"$1"),e,"")+e;case 5495:case 3959:return ie(e,/(image-set\([^]*)/,Ie+"$1$`$1");case 4968:return ie(ie(e,/(.+:)(flex-)?(.*)/,Ie+"box-pack:$3"+Ne+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ie+e+e;case 4095:case 3583:case 4068:case 2532:return ie(e,/(.+)-inline(.+)/,Ie+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ce(e)-1-t>6)switch(le(e,t+1)){case 109:if(45!==le(e,t+4))break;case 102:return ie(e,/(.+:)(.+)-([^]+)/,"$1"+Ie+"$2-$3$1"+De+(108==le(e,t+3)?"$3":"$2-$3"))+e;case 115:return~se(e,"stretch")?Je(ie(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==le(e,t+1))break;case 6444:switch(le(e,ce(e)-3-(~se(e,"!important")&&10))){case 107:return ie(e,":",":"+Ie)+e;case 101:return ie(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ie+(45===le(e,14)?"inline-":"")+"box$3$1"+Ie+"$2$3$1"+Ne+"$2box$3")+e}break;case 5936:switch(le(e,t+11)){case 114:return Ie+e+Ne+ie(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ie+e+Ne+ie(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ie+e+Ne+ie(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ie+e+Ne+e+e}return e}var et=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Ue:e.return=Je(e.value,e.length);break;case Ve:return je([Pe(e,{value:ie(e.value,"@","@"+Ie)})],n);case qe:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return je([Pe(e,{props:[ie(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return je([Pe(e,{props:[ie(t,/:(plac\w+)/,":"+Ie+"input-$1")]}),Pe(e,{props:[ie(t,/:(plac\w+)/,":-moz-$1")]}),Pe(e,{props:[ie(t,/:(plac\w+)/,Ne+"input-$1")]})],n)}return""})}}],tt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var rt=/[A-Z]|^ms/g,nt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,at=function(e){return 45===e.charCodeAt(1)},ot=function(e){return null!=e&&"boolean"!=typeof e},it=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}(function(e){return at(e)?e:e.replace(rt,"-$&").toLowerCase()}),st=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(nt,function(e,t,r){return ut={name:t,styles:r,next:ut},t})}return 1===tt[e]||at(e)||"number"!=typeof t||0===t?t:t+"px"};function lt(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var a=r;if(1===a.anim)return ut={name:a.name,styles:a.styles,next:ut},a.name;var o=r;if(void 0!==o.styles){var i=o.next;if(void 0!==i)for(;void 0!==i;)ut={name:i.name,styles:i.styles,next:ut},i=i.next;return o.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var a=0;a<r.length;a++)n+=lt(e,t,r[a])+";";else for(var o in r){var i=r[o];if("object"!=typeof i){var s=i;null!=t&&void 0!==t[s]?n+=o+"{"+t[s]+"}":ot(s)&&(n+=it(o)+":"+st(o,s)+";")}else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=lt(e,t,i);switch(o){case"animation":case"animationName":n+=it(o)+":"+l+";";break;default:n+=o+"{"+l+"}"}}else for(var u=0;u<i.length;u++)ot(i[u])&&(n+=it(o)+":"+st(o,i[u])+";")}return n}(e,t,r);case"function":if(void 0!==e){var s=ut,l=r(e);return ut=s,lt(e,t,l)}}var u=r;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var ut,ct=/label:\s*([^\s;{]+)\s*(;|$)/g;function Ot(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,a="";ut=void 0;var o=e[0];null==o||void 0===o.raw?(n=!1,a+=lt(r,t,o)):a+=o[0];for(var i=1;i<e.length;i++)a+=lt(r,t,e[i]),n&&(a+=o[i]);ct.lastIndex=0;for(var s,l="";null!==(s=ct.exec(a));)l+="-"+s[1];var u=function(e){for(var t,r=0,n=0,a=e.length;a>=4;++n,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(a){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(a)+l;return{name:u,styles:a,next:ut}}function dt(e,t,r){var n="";return r.split(" ").forEach(function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")}),n}function ht(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function pt(e,t,r){var n=[],a=dt(e,n,r);return n.length<2?r:a+t(n)}var ft=function e(t){for(var r="",n=0;n<t.length;n++){var a=t[n];if(null!=a){var o=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))o=e(a);else for(var i in o="",a)a[i]&&i&&(o&&(o+=" "),o+=i);break;default:o=a}o&&(r&&(r+=" "),r+=o)}}return r},vt=function(){var e=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n,a,o=e.stylisPlugins||et,i={},s=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)i[t[r]]=!0;s.push(e)});var l,u,c,O,d=[Ge,(O=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&O(e)})],h=(u=[Be,Ke].concat(o,d),c=Oe(u),function(e,t,r,n){for(var a="",o=0;o<c;o++)a+=u[o](e,t,r,n)||"";return a});a=function(e,t,r,n){l=r,je(We(e?e+"{"+t.styles+"}":t.styles),h),n&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new te({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:a};return p.sheet.hydrate(s),p}({key:"css"});e.sheet.speedy=function(e){this.isSpeedy=e},e.compat=!0;var t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=Ot(r,e.registered,void 0);return function(e,t){!function(e,t){var r=e.key+"-"+t.name;void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+r:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(e,a),e.key+"-"+a.name};return{css:t,cx:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return pt(e.registered,t,ft(n))},injectGlobal:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=Ot(r,e.registered);ht(e,a)},keyframes:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=Ot(r,e.registered),o="animation-"+a.name;return ht(e,{name:a.name,styles:"@keyframes "+o+"{"+a.styles+"}"}),o},hydrate:function(t){t.forEach(function(t){e.inserted[t]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:dt.bind(null,e.registered),merge:pt.bind(null,e.registered,t)}}(),gt=(vt.flush,vt.hydrate,vt.cx),mt=(vt.merge,vt.getRegisteredStyles,vt.injectGlobal,vt.keyframes),$t=vt.css;function Pt(e){const{isAvailable:t,openAssistant:r}=J();return t&&r?u().createElement(_t,{...e,openAssistant:r}):null}function _t({prompt:e,origin:t,context:r,autoSend:n=!0,title:a="Analyze with Assistant",size:o="sm",iconOnlyButton:i=!1,openAssistant:c,onClick:O}){const d=(0,ee.useStyles2)(bt);return(0,l.useEffect)(()=>{(0,s.reportInteraction)("grafana_assistant_app_open_sidebar_button_displayed",{from:t})},[t]),u().createElement(u().Fragment,null,i?u().createElement(ee.IconButton,{name:"ai-sparkle",onClick:()=>{null==O||O(),c({prompt:e,context:r,autoSend:n,origin:t})},variant:"secondary",size:o,"aria-label":a,className:d.icon,tooltip:a,"data-testid":"assistant-icon-button"}):u().createElement(ee.Button,{icon:"ai-sparkle",onClick:()=>{null==O||O(),c({prompt:e,context:r,autoSend:n,origin:t})},variant:"secondary",fill:"solid",size:o,title:a,"aria-label":a,className:d.button,"data-testid":"assistant-button"},a))}vt.sheet,vt.cache;const bt=e=>{const t=e.colors.secondary.main,r=e.colors.emphasize(t,.05),n=e.colors.background.canvas,a=e.shape.radius.default,o=`max(calc(${a} - 1px), 1px)`,i={content:'""',position:"absolute",inset:0,borderRadius:a,background:"linear-gradient(90deg, rgb(168, 85, 247), rgb(249, 115, 22))",zIndex:-2,pointerEvents:"none"},s=e=>({content:'""',position:"absolute",inset:"1px",borderRadius:o,background:`linear-gradient(${e}, ${e}), ${n}`,zIndex:-1,transition:"none",pointerEvents:"none"});return{button:$t({label:"assistant-button",position:"relative",isolation:"isolate",border:"none",transition:"none !important","&::before":i,"&::after":{...s(t),transition:"none"},"&:hover":{transition:"none !important"},"&:hover::after":{background:`linear-gradient(${r}, ${r}), ${n}`}}),icon:$t({label:"assistant-icon",position:"relative",isolation:"isolate",border:"none",background:"none",padding:e.spacing(.5),"&::before":{...i,transition:"background 0.1s ease"},"&:hover::after":{...s(t),background:`linear-gradient(${r}, ${r}), ${n}`}})}};let yt=null,Et=null,Qt=null;function Rt(e){yt=e}function wt(e){Et=e}async function xt(){if(!yt){if(!Et)throw new Error("InlineAssistant not initialized. Make sure the Grafana Assistant plugin is loaded and initialized.");return Qt||(Qt=(async()=>{try{await Et()}catch(e){throw Qt=null,e}})(),Qt)}}function Xt(){if(!yt)throw new Error("InlineAssistant factory not initialized. Make sure the Grafana Assistant plugin is loaded.");return yt}function St(){const[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(""),[a,o]=(0,l.useState)(null),i=(0,l.useRef)(null),s=(0,l.useCallback)(()=>{o(null),n("")},[]),u=(0,l.useCallback)(()=>{i.current&&i.current.cancel(),t(!1)},[]),c=(0,l.useCallback)(async e=>{var r;o(null),n(""),t(!0);try{await xt();const r=Xt();i.current||(i.current=await r(e.origin)),await i.current.sendPrompt({prompt:e.prompt,systemPrompt:e.systemPrompt,onStart:()=>{t(!0)},onDelta:t=>{var r;n(e=>e+t),null===(r=e.onDelta)||void 0===r||r.call(e,t)},onComplete:r=>{var a;n(r),t(!1),null===(a=e.onComplete)||void 0===a||a.call(e,r)},onError:r=>{var n;o(r),t(!1),null===(n=e.onError)||void 0===n||n.call(e,r)}})}catch(n){const a=n instanceof Error?n:new Error(String(n));o(a),t(!1),null===(r=e.onError)||void 0===r||r.call(e,a)}},[]);return(0,l.useEffect)(()=>()=>{i.current&&(i.current.cancel(),i.current.dispose(),i.current=null)},[]),{generate:c,isGenerating:e,content:r,error:a,cancel:u,reset:s}}const Tt=e=>{const t=["rgb(168, 85, 247)","rgb(249, 115, 22)"];if("dark"===e.name.toLowerCase()||"light"===e.name.toLowerCase())return t;const r=e.colors.gradients.brandHorizontal.match(/#[0-9A-Fa-f]{6}/g);return!r||r.length<2?t:[r[0],r[1]]},At=(e,t,r,n)=>{const a=Array.from({length:101},(e,t)=>t),o={},[i,s]=Tt(e),l=null!=r?r:i,u=null!=n?n:s;return a.forEach(e=>{o[`${e}%`]={backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from ${3.6*e}deg, transparent 60%, ${l} 80%, ${u} 100%, transparent 15%)\n      `}}),o};function Ct({value:e,onChange:t,placeholder:r,origin:n,systemPrompt:a,onComplete:o,onError:i,onDelta:s,disabled:l=!1,className:c,"data-testid":O}){const{generate:d,isGenerating:h,error:p,reset:f}=St(),v=!e.trim()||l||h,g=(0,ee.useStyles2)(kt),m=async()=>{if(v)return;const t=e.trim();f(),await d({prompt:t,origin:n,systemPrompt:a,onComplete:e=>{null==o||o(e)},onError:e=>{null==i||i(e)},onDelta:e=>{null==s||s(e)}})},$=u().createElement(ee.IconButton,{name:"ai-sparkle",onClick:m,disabled:v,tooltip:v?"Enter text to generate":"Generate with AI","data-testid":O?`${O}-send`:void 0});return u().createElement("div",{className:gt(g.wrapper,{[g.animatedWrapper]:h},c),"data-testid":O},u().createElement(ee.Input,{value:e,onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),m())},onChange:e=>t(e.currentTarget.value),placeholder:null!=r?r:"Ask AI to generate...",disabled:l||h,suffix:$,invalid:!!p,"data-testid":O?`${O}-input`:void 0}))}const kt=e=>{const t=e.colors.background.primary,r=mt({label:"ai-input-border-animation",...At(e,t)}),[n,a]=Tt(e);return{wrapper:$t({label:"ai-text-input-wrapper",position:"relative",borderRadius:e.shape.radius.default}),animatedWrapper:$t({label:"ai-text-input-animated",border:"1px solid transparent",backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from 0deg, transparent 60%, ${n} 80%, ${a} 100%, transparent 15%)\n      `,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",animation:`${r} 2s linear infinite`,"& input":{border:"none !important"}})}};function Nt({value:e,onChange:t,placeholder:r,origin:n,systemPrompt:a,onComplete:o,onError:i,onDelta:s,disabled:l=!1,rows:c=4,className:O,"data-testid":d}){const{generate:h,isGenerating:p,error:f,reset:v}=St(),g=!e.trim()||l||p,m=(0,ee.useStyles2)(Dt),$=async()=>{if(g)return;const t=e.trim();v(),await h({prompt:t,origin:n,systemPrompt:a,onComplete:e=>{null==o||o(e)},onError:e=>{null==i||i(e)},onDelta:e=>{null==s||s(e)}})};return u().createElement("div",{className:gt(m.textareaWrapper,{[m.animatedWrapper]:p},O),"data-testid":d},u().createElement(ee.TextArea,{value:e,onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),$())},onChange:e=>t(e.currentTarget.value),placeholder:null!=r?r:"Ask AI to generate... (Cmd/Ctrl+Enter to send)",disabled:l||p,rows:c,className:m.textarea,invalid:!!f,"data-testid":d?`${d}-textarea`:void 0}),u().createElement(ee.IconButton,{name:"ai-sparkle",onClick:$,disabled:g,className:m.sendButton,"aria-label":"Generate with AI",tooltip:g?"Enter text to generate":"Generate with AI (Cmd/Ctrl+Enter)","data-testid":d?`${d}-send`:void 0}))}const Dt=e=>{const t=e.colors.background.primary,r=mt({label:"ai-textarea-border-animation",...At(e,t)}),[n,a]=Tt(e);return{textareaWrapper:$t({label:"ai-textarea-wrapper",position:"relative",borderRadius:e.shape.radius.default}),animatedWrapper:$t({label:"ai-textarea-animated",border:"1px solid transparent",backgroundImage:`\n        linear-gradient(${t}, ${t}),\n        conic-gradient(from 0deg, transparent 60%, ${n} 80%, ${a} 100%, transparent 15%)\n      `,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",animation:`${r} 2s linear infinite`,"& textarea":{border:"none !important"}}),textarea:$t({label:"ai-textarea",paddingRight:e.spacing(4),scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),sendButton:$t({label:"ai-textarea-send",position:"absolute",right:e.spacing(1),top:e.spacing(1)})}};e.exports=n})()},902:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const n=[],a=[];function o(e,t,r){if(e===t)return 0;const o=r?.maxDistance,i=e;e.length>t.length&&(e=t,t=i);let s=e.length,l=t.length;for(;s>0&&e.charCodeAt(~-s)===t.charCodeAt(~-l);)s--,l--;let u,c,O,d,h=0;for(;h<s&&e.charCodeAt(h)===t.charCodeAt(h);)h++;if(s-=h,l-=h,void 0!==o&&l-s>o)return o;if(0===s)return void 0!==o&&l>o?o:l;let p=0,f=0;for(;p<s;)a[p]=e.charCodeAt(h+p),n[p]=++p;for(;f<l;){for(u=t.charCodeAt(h+f),O=f++,c=f,p=0;p<s;p++)d=u===a[p]?O:O+1,O=n[p],c=n[p]=O>c?d>c?c+1:d:d>O?O+1:d;if(void 0!==o){let e=c;for(p=0;p<s;p++)n[p]<e&&(e=n[p]);if(e>o)return o}}return n.length=s,a.length=s,void 0!==o&&c>o?o:c}},1932:(e,t,r)=>{"use strict";r.d(t,{Nc:()=>n,Rq:()=>a});const n=e=>{if(""===e)return e;return a(e)?e:`"${e}"`},a=e=>{if(0===e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!o(r,t))return!1}return!0},o=(e,t)=>{const r=e.codePointAt(0);return void 0!==r&&(r>=97&&r<=122||r>=65&&r<=90||95===r||58===r||r>=48&&r<=57&&t>0)}},5540:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(5959);function a(e){const{ref:t,box:r,onResize:a}=e;(0,n.useEffect)(()=>{let e=null==t?void 0:t.current;if(e){if(void 0===window.ResizeObserver)return window.addEventListener("resize",a,!1),()=>{window.removeEventListener("resize",a,!1)};{const t=new window.ResizeObserver(e=>{e.length&&a()});return t.observe(e,{box:r}),()=>{e&&t.unobserve(e)}}}},[a,t,r])}},5561:(e,t,r)=>{"use strict";r.d(t,{$W:()=>o.$W,$g:()=>o.$g,$l:()=>o.$l,B0:()=>x,Lh:()=>o.Lh,Nm:()=>o.Uc,O4:()=>o.O4,Uc:()=>o.Uc,by:()=>E,wh:()=>o.wh});var n,a,o=r(9319),i=Object.create,s=Object.defineProperty,l=Object.defineProperties,u=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=Reflect.get,g=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&g(e,r,t[r]);if(d)for(var r of d(t))f.call(t,r)&&g(e,r,t[r]);return e},$=(e,t)=>l(e,c(t)),P=(e,t,r)=>new Promise((n,a)=>{var o=e=>{try{s(r.next(e))}catch(e){a(e)}},i=e=>{try{s(r.throw(e))}catch(e){a(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);s((r=r.apply(e,t)).next())}),_=(n={"../../node_modules/eventemitter3/index.js"(e,t){var r=Object.prototype.hasOwnProperty,n="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,a||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)r.call(e,t)&&a.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,o=r.length,i=new Array(o);a<o;a++)i[a]=r[a].fn;return i},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,a,o,i){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],O=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),O){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,a),!0;case 5:return c.fn.call(c.context,t,r,a,o),!0;case 6:return c.fn.call(c.context,t,r,a,o,i),!0}for(u=1,l=new Array(O-1);u<O;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),O){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,a);break;default:if(!l)for(d=1,l=new Array(O-1);d<O;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||a&&!i.once||r&&i.context!==r||s(this,o);else{for(var l=0,u=[],c=i.length;l<c;l++)(i[l].fn!==t||a&&!i[l].once||r&&i[l].context!==r)&&u.push(i[l]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==t&&(t.exports=l)}},function(){return a||(0,n[O(n)[0]])((a={exports:{}}).exports,a),a.exports}),b=new class{constructor(){this.metadata={name:"No-op Provider"}}resolveBooleanEvaluation(e,t){return this.noOp(t)}resolveStringEvaluation(e,t){return this.noOp(t)}resolveNumberEvaluation(e,t){return this.noOp(t)}resolveObjectEvaluation(e,t){return this.noOp(t)}noOp(e){return{value:e,reason:"No-op"}}},y=((e,t,r)=>(r=null!=e?i(h(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of O(t))p.call(e,a)||a===r||s(e,a,{get:()=>t[a],enumerable:!(n=u(t,a))||n.enumerable});return e})(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(_(),1),E=class extends o.sN{constructor(){super(),this.eventEmitter=new y.default}},Q=(o.Lh,o.Lh,o.$g,class{constructor(e,t,r,n,a,o,i){this.providerAccessor=e,this.providerStatusAccessor=t,this.emitterAccessor=r,this.apiContextAccessor=n,this.apiHooksAccessor=a,this.globalLogger=o,this.options=i,this._hooks=[]}get metadata(){var e,t;return{name:null!=(e=this.options.domain)?e:this.options.name,domain:null!=(t=this.options.domain)?t:this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(e,t,r){var n;this.emitterAccessor().addHandler(e,t);if((0,o._e)(e,this.providerStatus))try{t({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this.emitterAccessor().removeHandler(e,t)}getHandlers(e){return this.emitterAccessor().getHandlers(e)}setLogger(e){return this._clientLogger=new o.qM(e),this}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(e,t,r){return this.getBooleanDetails(e,t,r).value}getBooleanDetails(e,t,r){return this.evaluate(e,this._provider.resolveBooleanEvaluation,t,"boolean",r)}getStringValue(e,t,r){return this.getStringDetails(e,t,r).value}getStringDetails(e,t,r){return this.evaluate(e,this._provider.resolveStringEvaluation,t,"string",r)}getNumberValue(e,t,r){return this.getNumberDetails(e,t,r).value}getNumberDetails(e,t,r){return this.evaluate(e,this._provider.resolveNumberEvaluation,t,"number",r)}getObjectValue(e,t,r){return this.getObjectDetails(e,t,r).value}getObjectDetails(e,t,r){return this.evaluate(e,this._provider.resolveObjectEvaluation,t,"object",r)}track(e,t={}){var r,n,a;try{if(this.shortCircuitIfNotReady(),"function"==typeof this._provider.track){const o=Object.freeze(m({},this.apiContextAccessor(null==(r=null==this?void 0:this.options)?void 0:r.domain)));return null==(a=(n=this._provider).track)?void 0:a.call(n,e,o,t)}this._logger.debug("Provider does not support the track function; will no-op.")}catch(e){this._logger.debug("Error recording tracking event.",e)}}evaluate(e,t,r,n,a={}){var i,s;const l=[...this.apiHooksAccessor(),...this.getHooks(),...a.hooks||[],...this._provider.hooks||[]],u=[...l].reverse(),c=m({},this.apiContextAccessor(null==(i=null==this?void 0:this.options)?void 0:i.domain)),O=u.map(()=>Object.freeze({flagKey:e,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:this._provider.metadata,context:c,logger:this._logger,hookData:new o.eD}));let d;try{this.beforeHooks(l,O,a),this.shortCircuitIfNotReady();const n=t.call(this._provider,e,r,c,this._logger),i=$(m({},n),{flagMetadata:Object.freeze(null!=(s=n.flagMetadata)?s:{}),flagKey:e});if(i.errorCode){const t=(0,o.l6)(i.errorCode,i.errorMessage);this.errorHooks(u,O,t,a),d=this.getErrorEvaluationDetails(e,r,t,i.flagMetadata)}else this.afterHooks(u,O,i,a),d=i}catch(t){this.errorHooks(u,O,t,a),d=this.getErrorEvaluationDetails(e,r,t)}return this.finallyHooks(u,O,d,a),d}beforeHooks(e,t,r){var n;for(const[a,o]of e.entries()){const i=t[e.length-1-a];Object.freeze(i),Object.freeze(i.context),null==(n=null==o?void 0:o.before)||n.call(o,i,Object.freeze(r.hookHints))}}afterHooks(e,t,r,n){var a;for(const[o,i]of e.entries()){const e=t[o];null==(a=null==i?void 0:i.after)||a.call(i,e,r,n.hookHints)}}errorHooks(e,t,r,n){var a;for(const[o,i]of e.entries())try{const e=t[o];null==(a=null==i?void 0:i.error)||a.call(i,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'error' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}finallyHooks(e,t,r,n){var a;for(const[o,i]of e.entries())try{const e=t[o];null==(a=null==i?void 0:i.finally)||a.call(i,e,r,n.hookHints)}catch(e){this._logger.error(`Unhandled error during 'finally' hook: ${e}`),e instanceof Error&&this._logger.error(e.stack),this._logger.error(null==e?void 0:e.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}shortCircuitIfNotReady(){if(this.providerStatus===o.$l.NOT_READY)throw new o._V("provider has not yet initialized");if(this.providerStatus===o.$l.FATAL)throw new o.wh("provider is in an irrecoverable error state")}getErrorEvaluationDetails(e,t,r,n={}){const a=null==r?void 0:r.message;return{errorCode:(null==r?void 0:r.code)||o.O4.GENERAL,errorMessage:a,value:t,reason:o.$W.ERROR,flagMetadata:Object.freeze(n),flagKey:e}}}),R=Symbol.for("@openfeature/web-sdk/api"),w=globalThis,x=class e extends o.g7{constructor(){super("client"),this._statusEnumType=o.$l,this._apiEmitter=new E,this._defaultProvider=new o.VL(b,o.$l.NOT_READY,this._statusEnumType),this._domainScopedProviders=new Map,this._createEventEmitter=()=>new E}static getInstance(){const t=w[R];if(t)return t;const r=new e;return w[R]=r,r}getProviderStatus(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.status)?r:this._defaultProvider.status}setProviderAndWait(e,t,r){return P(this,null,function*(){const n=(0,o.j)(e),a=n?(0,o.XD)(t):(0,o.XD)(e),i=n?(0,o.XD)(r):(0,o.XD)(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i),yield this.setAwaitableProvider(n,a)})}setProvider(e,t,r){const n=(0,o.j)(e),a=n?(0,o.XD)(t):(0,o.XD)(e),i=n?(0,o.XD)(r):(0,o.XD)(t);i&&(n?this._domainScopedContext.set(n,i):this._context=i);const s=this.setAwaitableProvider(n,a);return Promise.resolve(s).catch(e=>{this._logger.error("Error during provider initialization:",e)}),this}getProvider(e){return this.getProviderForClient(e)}setContext(e,t){return P(this,null,function*(){var r,n;const a=(0,o.j)(e),i=null!=(n=null!=(r=(0,o.XD)(e))?r:(0,o.XD)(t))?n:{};if(a){const e=this._domainScopedProviders.get(a);if(e){const t=this.getContext(a);this._domainScopedContext.set(a,i),yield this.runProviderContextChangeHandler(a,e,t,i)}else this._domainScopedContext.set(a,i)}else{const e=this._context;this._context=i;const t=Array.from(this._domainScopedProviders.entries()).filter(([e])=>!this._domainScopedContext.has(e)).reduce((e,[t,r])=>(e.push({domain:t,wrapper:r}),e),[]),r=[{domain:void 0,wrapper:this._defaultProvider},...t];yield Promise.all(r.map(t=>this.runProviderContextChangeHandler(t.domain,t.wrapper,e,i)))}})}getContext(e){const t=(0,o.j)(e);if(t){const e=this._domainScopedContext.get(t);if(e)return e;this._logger.debug(`Unable to find context for '${t}'.`)}return this._context}clearContext(e){return P(this,null,function*(){const t=(0,o.j)(e);if(!t)return this.setContext({});{const e=this._domainScopedProviders.get(t);if(e){const r=this.getContext(t);this._domainScopedContext.delete(t);const n=this.getContext();yield this.runProviderContextChangeHandler(t,e,r,n)}else this._domainScopedContext.delete(t)}})}clearContexts(){return P(this,null,function*(){yield this.clearContext(),yield Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))})}getClient(e,t){return new Q(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),e=>this.getContext(e),()=>this.getHooks(),()=>this._logger,{domain:e,version:t})}clearProviders(){return P(this,null,function*(){var t,r,n;yield(t=e.prototype,r=this,n="clearProvidersAndSetDefault",v(h(t),n,r)).call(this,b),this._domainScopedContext.clear()})}runProviderContextChangeHandler(e,t,r,n){return P(this,null,function*(){var a,i,s,l,u,c;const O=(null==(i=null==(a=t.provider)?void 0:a.metadata)?void 0:i.name)||"unnamed-provider";try{if("function"==typeof t.provider.onContextChange){const a=t.provider.onContextChange(r,n);a&&"function"==typeof(null==a?void 0:a.then)&&(t.incrementPendingContextChanges(),t.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(o.Uc.Reconciling,{domain:e,providerName:O})}),null==(s=this._apiEmitter)||s.emit(o.Uc.Reconciling,{domain:e,providerName:O}),yield a,t.decrementPendingContextChanges())}t.status=this._statusEnumType.READY,t.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(t=>{null==t||t.emit(o.Uc.ContextChanged,{clientName:e,domain:e,providerName:O})}),null==(l=this._apiEmitter)||l.emit(o.Uc.ContextChanged,{clientName:e,domain:e,providerName:O}))}catch(r){if(t.decrementPendingContextChanges(),t.status=this._statusEnumType.ERROR,t.allContextChangesSettled){const t=`Error running ${O}'s context change handler: ${null==r?void 0:r.message}`;null==(u=this._logger)||u.error(`${t}`,r),this.getAssociatedEventEmitters(e).forEach(r=>{null==r||r.emit(o.Uc.Error,{clientName:e,domain:e,providerName:O,message:t})}),null==(c=this._apiEmitter)||c.emit(o.Uc.Error,{clientName:e,domain:e,providerName:O,message:t})}}})}}.getInstance()},6365:(e,t,r)=>{"use strict";r.d(t,{AL:()=>u,K3:()=>s,MD:()=>l,Yw:()=>c});var n=r(782);const a={json:1,logfmt:2,unpack:3,pattern:4,regexp:5,label_format:7,line_format:8,label_replace:9,vector:10,offset:11,bool:12,on:13,ignoring:14,group_left:15,group_right:16,unwrap:6,decolorize:17,drop:18,keep:19},o={by:20,without:21,and:22,or:23,unless:24,sum:25,avg:26,count:27,max:28,min:29,stddev:30,stdvar:31,bottomk:32,topk:33,sort:34,sort_desc:35},i={__proto__:null,ip:295,count_over_time:301,rate:303,rate_counter:305,bytes_over_time:307,bytes_rate:309,avg_over_time:311,sum_over_time:313,min_over_time:315,max_over_time:317,stddev_over_time:319,stdvar_over_time:321,quantile_over_time:323,first_over_time:325,last_over_time:327,absent_over_time:329,bytes:335,duration:337,duration_seconds:339},s=n.U1.deserialize({version:14,states:"EtOYQPOOO#cQPO'#DUOOQO'#ER'#ERO#hQPO'#ERO$}QPO'#DTOYQPO'#DTOOQO'#Ed'#EdO%[QPO'#EcOOQO'#FP'#FPO%aQPO'#FOQ%lQPOOO&mQPO'#F]O&rQPO'#F^OOQO'#Eb'#EbOOQO'#DS'#DSOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsO&wQPO'#DWOOQO'#DV'#DVO'VQPO,59pOOQO,5:m,5:mOOQO'#Dc'#DcO'_QPO'#DbO'gQPO'#DaO)lQPO'#D`O*{QPO'#D`OOQO'#D_'#D_O+sQPO,59oO-}QPO,59oO.UQPO,5:|O.]QPO,5:}O.hQPO'#E|O0sQPO,5;jO0zQPO,5;jO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lOYQPO,5;wO3cQPO,5;xO3hQPO,59rO#cQPO,59qOOQO1G/[1G/[OOQO'#Dh'#DhO3mQPO,59|O5^QPO,59|OOQO'#Di'#DiO5cQPO,59{OOQO,59{,59{O5kQPO'#DWO6YQPO'#DlO8PQPO'#DoO9sQPO'#DoOOQO'#Do'#DoOOQO'#Dv'#DvOOQO'#Dt'#DtO+kQPO'#DtO9xQPO,59zO;iQPO'#EVO;nQPO'#EWOOQO'#EZ'#EZO;sQPO'#E[O;xQPO'#E_OOQO,59z,59zOOQO,59y,59yOOQO1G/Z1G/ZOOQO1G0h1G0hO;}QPO'#EtO.`QPO'#EtO<XQPO1G0iO<^QPO1G0iO<cQPO,5;hO=oQPO1G1UO=vQPO1G1UO=}QPO1G1UO>UQPO'#FSO@dQPO'#FRO@nQPO'#FROYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO@xQPO1G1cOAPQPO1G1dOOQO1G/^1G/^OOQO1G/]1G/]O5cQPO1G/hOAUQPO1G/hOAZQPO'#DjOBzQPO'#DjOOQO1G/g1G/gOCbQPO,59rOCPQPO,5:cOOQO'#Dm'#DmOClQPO,5:WOEcQPO'#DrOOQO'#Dq'#DqOGVQPO,5:_OHvQPO,5:[OOQO,5:Z,5:ZOJgQPO,5:`O+kQPO,5:`O+kQPO,5:`OOQO,5:q,5:qOJuQPO'#EYOOQO'#EX'#EXOJzQPO,5:rOLkQPO'#E^OOQO'#E^'#E^OOQO'#E]'#E]ONbQPO,5:vO!!RQPO'#EaOOQO'#Ea'#EaOOQO'#E`'#E`O!#xQPO,5:yO!%iQPO'#D`O;}QPO,5;`O!%pQPO'#EuO!%uQPO,5;`O!%}QPO,5;`O!&[QPO,5;`O!&iQPO,5;`O!&nQPO7+&TO.`QPO7+&TOOQO'#E}'#E}O!(OQPO1G1SOOQO1G1S1G1SOYQPO7+&pO!(WQPO7+&pO!)hQPO7+&pO!)oQPO7+&pO!)vQQO'#FTOOQO,5;n,5;nO!,UQPO,5;mO!,]QPO,5;mO!-nQPO7+&rO!-uQPO7+&rOOQO7+&r7+&rO!.SQPO7+&rO!.ZQPO7+&rO!/`QPO7+&rO!/pQPO7+&}OOQO7+'O7+'OOOQO7+%S7+%SO!/uQPO7+%SO5cQPO,5:UO!/zQPO,5:UO!0PQPO1G/{OOQO1G/}1G/}OOQO1G0U1G0UOOQO1G0W1G0WOOQO,5:X,5:XO!0UQPO1G/yO!1uQPO,5:^O!1zQPO,5:]OOQO1G/z1G/zO!2PQPO1G/zO!3pQPO,5:tO;nQPO,5:sO;sQPO,5:wO;xQPO,5:zO!3xQPO,5;cO!%uQPO1G0zO!4WQPO1G0zO!4`QPO,5;aO+kQPO,5;cO!4eQPO1G0zO!4oQPO'#EvO!4tQPO1G0zO!4eQPO1G0zO!4|QPO1G0zO!5ZQPO1G0zO!%xQPO1G0zOOQO1G0z1G0zOOQO<<Io<<IoO!5fQPO<<IoO!5kQPO,5;iOOQO7+&n7+&nO!5pQPO<<J[OOQO<<J[<<J[OYQPO<<J[OOQO'#FV'#FVO!5wQPO,5;oOOQO'#FU'#FUOOQO,5;o,5;oOOQO1G1X1G1XO!6PQPO1G1XO!8YQPO<<JiOOQO<<Hn<<HnOOQO1G/p1G/pO!8_QPO1G/pO!8dQPO7+%gOOQO1G/x1G/xOOQO1G/w1G/wOOQO1G0`1G0`OOQO1G0_1G0_OOQO1G0c1G0cOOQO1G0f1G0fOOQO'#Ex'#ExOOQO1G0}1G0}O!8iQPO1G0}OOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{OOQO7+&f7+&fOOQO1G0{1G0{O!8nQPO1G0}O!9SQPO7+&fOOQO,5;b,5;bO!9[QPO7+&fO!%xQPO7+&fO!9fQPO7+&fO!9qQPOAN?ZOOQO1G1T1G1TO!;RQPOAN?vO!<cQPOAN?vO!<jQQO1G1ZOOQO1G1Z1G1ZOOQO7+&s7+&sO!<rQPOAN@TOOQO7+%[7+%[O!<wQPO<<IRO!<|QPO7+&iO!=RQPO<<JQO!=ZQPO<<JQO!=cQPO'#EwO!=hQPO<<JQOOQOG24uG24uOOQOG25bG25bOOQO1G1[1G1[OOQO7+&u7+&uO!=pQPOG25oOOQOAN>mAN>mO!=uQPO<<JTOOQOAN?lAN?lO!=zQPOAN?lO!>SQPOLD+ZOOQOAN?oAN?oOOQO,5:r,5:rO!>XQPO!$'NuO!>^QPO!)9DaO!>cQPO!.K9{OOQO!4//g!4//gO;nQPO'#EWO!>hQPO'#D`O!?`QPO,59oO!@fQPO'#DTOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WOYQPO1G1WO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO1PQPO,5;lO!AqQPO7+&rO!AxQPO7+&rO!BVQPO7+&rO!C_QPO7+&rO!CfQPO7+&rO!B^QPO'#FQ",stateData:"!Cs~O$TOStOS~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!vQO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O{nO~O!vqO~O!OrO!QrO!WrO!XrO!YrO!ZrOfwXgwXhwX!lwX!nwX!owX!pwX!qwX!wwX!xwX#{wX#|wX#}wX$OwX~O!_vO$RwX$ZwX~P#mO$Y{O~Od|Oe|O$Y}O~Of!QOg!POh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{!SO#|!SO#}!SO$O!TO~O$Y!VO~O$Y!WO~O|!XO!O!XO!P!XO!Q!XO~O$V!YO$W!ZO~O}!]O$X!_O~Og!`Of!TXh!TX!O!TX!Q!TX!W!TX!X!TX!Y!TX!Z!TX!_!TX!l!TX!n!TX!o!TX!p!TX!q!TX!w!TX!x!TX#{!TX#|!TX#}!TX$O!TX$R!TX$Z!TX$k!TX$V!TX~O!OrO!QrO!WrO!XrO!YrO!ZrO~Of!SXg!SXh!SX!_!SX!l!SX!n!SX!o!SX!p!SX!q!SX!w!SX!x!SX#{!SX#|!SX#}!SX$O!SX$R!SX$Z!SX$k!SX$V!SX~P)WOP!dOQ!cOR!fOS!eOT!eOV!lOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_vOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Rwa$Zwa~P)WOfvXgvXhvX!OvX!lvX!nvX!ovX!pvX!qvX!wvX!xvX#{vX#|vX#}vX$OvX~O$Z!rO~P,|O$Z!sO~P,|O!v!wO$UPO$Y!uO~O$Y!xO~OXZOY[OiWOjWOkWOlWOmWOnWOoWOpWOqWOrWOsWO!wRO!xRO$UPO$YTO$[_O$]`O$^aO$_bO$`cO$adO$beO$cfO$dgO$ehO$fiO$gjO$hkO$ilO$jmO~O!v!yO~P.mO$Y!{O~O[#OO]!|O^!|OX#uPY#uPi#uPj#uPk#uPl#uPm#uPn#uPo#uPp#uPq#uPr#uPs#uP!v#uP!w#uP!x#uP$U#uP$Y#uP$[#uP$]#uP$^#uP$_#uP$`#uP$a#uP$b#uP$c#uP$d#uP$e#uP$f#uP$g#uP$h#uP$i#uP$j#uP~O!v#WO~O}#XO~Og#ZOf!Uah!Ua!O!Ua!Q!Ua!W!Ua!X!Ua!Y!Ua!Z!Ua!_!Ua!l!Ua!n!Ua!o!Ua!p!Ua!q!Ua!w!Ua!x!Ua#{!Ua#|!Ua#}!Ua$O!Ua$R!Ua$Z!Ua$k!Ua$V!Ua~O$Y#[O~O}#]O$X!_O~O|#`O!O#`O!P!XO!Q!XO!l#aO!n#aO!o#aO!p#aO!q#aO~O{#dO!b#bOf!`Xg!`Xh!`X!O!`X!Q!`X!W!`X!X!`X!Y!`X!Z!`X!_!`X!l!`X!n!`X!o!`X!p!`X!q!`X!w!`X!x!`X#{!`X#|!`X#}!`X$O!`X$R!`X$Z!`X$k!`X$V!`X~O{#dOf!cXg!cXh!cX!O!cX!Q!cX!W!cX!X!cX!Y!cX!Z!cX!_!cX!l!cX!n!cX!o!cX!p!cX!q!cX!w!cX!x!cX#{!cX#|!cX#}!cX$O!cX$R!cX$Z!cX$k!cX$V!cX~O}#hO~Of#jOg#kO$V#jOh!Sa!O!Sa!Q!Sa!W!Sa!X!Sa!Y!Sa!Z!Sa!_!Sa!l!Sa!n!Sa!o!Sa!p!Sa!q!Sa!w!Sa!x!Sa#{!Sa#|!Sa#}!Sa$O!Sa$R!Sa$Z!Sa$k!Sa~O}#lO~O{#mO~O{#pO~O{#tO~O!_#xO$k#zO~P)WO$Z$PO~O$V$QO~O{$RO$Z$TO~Of!uXg!uXh!uX!O!uX!l!uX!n!uX!o!uX!p!uX!q!uX!w!uX!x!uX#{!uX#|!uX#}!uX$O!uX$Z!uX~O$V$UO~P<kO$Z$VO~P,|O!v$WO~P.mO$Y$YO~OX#uXY#uXi#uXj#uXk#uXl#uXm#uXn#uXo#uXp#uXq#uXr#uXs#uX!v#uX!w#uX!x#uX$U#uX$Y#uX$[#uX$]#uX$^#uX$_#uX$`#uX$a#uX$b#uX$c#uX$d#uX$e#uX$f#uX$g#uX$h#uX$i#uX$j#uX~O_$[O`$[O~P>ZO]!|O^!|O~P>ZO$V$dO~P,|O$Z$eO~O}$gO~Og$hOf!^Xh!^X!O!^X!Q!^X!W!^X!X!^X!Y!^X!Z!^X!_!^X!l!^X!n!^X!o!^X!p!^X!q!^X!w!^X!x!^X#{!^X#|!^X#}!^X$O!^X$R!^X$Z!^X$k!^X$V!^X~O$Y$iO~O!m$kO!s$lO!vQO!wRO!xRO~O}#XO$X!_O~PCPO{#dO!b$nOf!`ag!`ah!`a!O!`a!Q!`a!W!`a!X!`a!Y!`a!Z!`a!_!`a!l!`a!n!`a!o!`a!p!`a!q!`a!w!`a!x!`a#{!`a#|!`a#}!`a$O!`a$R!`a$Z!`a$k!`a$V!`a~O|$pOf!fXg!fXh!fX!O!fX!Q!fX!W!fX!X!fX!Y!fX!Z!fX!_!fX!l!fX!n!fX!o!fX!p!fX!q!fX!w!fX!x!fX#{!fX#|!fX#}!fX$O!fX$R!fX$V!fX$Z!fX$k!fX~O$V$qOf!gag!gah!ga!O!ga!Q!ga!W!ga!X!ga!Y!ga!Z!ga!_!ga!l!ga!n!ga!o!ga!p!ga!q!ga!w!ga!x!ga#{!ga#|!ga#}!ga$O!ga$R!ga$Z!ga$k!ga~O$V$qOf!dag!dah!da!O!da!Q!da!W!da!X!da!Y!da!Z!da!_!da!l!da!n!da!o!da!p!da!q!da!w!da!x!da#{!da#|!da#}!da$O!da$R!da$Z!da$k!da~Of#jOg#kO$V#jO$Z$rO~O|$tO~O$V$uOf!zag!zah!za!O!za!Q!za!W!za!X!za!Y!za!Z!za!_!za!l!za!n!za!o!za!p!za!q!za!w!za!x!za#{!za#|!za#}!za$O!za$R!za$Z!za$k!za~O|!XO!O!XO!P!XO!Q!XOf#QXg#QXh#QX!W#QX!X#QX!Y#QX!Z#QX!_#QX!l#QX!n#QX!o#QX!p#QX!q#QX!w#QX!x#QX#{#QX#|#QX#}#QX$O#QX$R#QX$V#QX$Z#QX$k#QX~O$V$vOf#Oag#Oah#Oa!O#Oa!Q#Oa!W#Oa!X#Oa!Y#Oa!Z#Oa!_#Oa!l#Oa!n#Oa!o#Oa!p#Oa!q#Oa!w#Oa!x#Oa#{#Oa#|#Oa#}#Oa$O#Oa$R#Oa$Z#Oa$k#Oa~O|!XO!O!XO!P!XO!Q!XOf#TXg#TXh#TX!W#TX!X#TX!Y#TX!Z#TX!_#TX!l#TX!n#TX!o#TX!p#TX!q#TX!w#TX!x#TX#{#TX#|#TX#}#TX$O#TX$R#TX$V#TX$Z#TX$k#TX~O$V$wOf#Rag#Rah#Ra!O#Ra!Q#Ra!W#Ra!X#Ra!Y#Ra!Z#Ra!_#Ra!l#Ra!n#Ra!o#Ra!p#Ra!q#Ra!w#Ra!x#Ra#{#Ra#|#Ra#}#Ra$O#Ra$R#Ra$Z#Ra$k#Ra~OU$xO~P*{O!m${O~O!_$|O$k#zO~OZ%OO!_#xO$Z#ha~P)WO!_#xO$Z%TO$k#zO~P)WO$Z%UO~Od|Oe|Of#Vqg#Vqh#Vq!O#Vq!l#Vq!n#Vq!o#Vq!p#Vq!q#Vq!w#Vq!x#Vq#{#Vq#|#Vq#}#Vq$O#Vq$R#Vq$Z#Vq$V#Vq~O$V%XO$Z%YO~Od|Oe|Of#rqg#rqh#rq!O#rq!l#rq!n#rq!o#rq!p#rq!q#rq!w#rq!x#rq#{#rq#|#rq#}#rq$O#rq$R#rq$Z#rq$V#rq~O$V%]O~P<kO$Z%[O~P,|O#z%^O$Z%aO~OX#uaY#uai#uaj#uak#ual#uam#uan#uao#uap#uaq#uar#uas#ua!v#ua!w#ua!x#ua$U#ua$[#ua$]#ua$^#ua$_#ua$`#ua$a#ua$b#ua$c#ua$d#ua$e#ua$f#ua$g#ua$h#ua$i#ua$j#ua~O$Y$YO~P!*OO_%cO`%cO$Y#ua~P!*OOf!QOh!QO!O!UO!l!UO!n!UO!o!UO!p!UO!q!UO!w!RO!x!RO#{#tq#|#tq#}#tq$O#tq$R#tq$Z#tq~Og#tq~P!,jOf#tqg#tqh#tq~P!,pOg!PO~P!,jO$R#tq$Z#tq~P%lOf#tqg#tqh#tq!O#tq!l#tq!n#tq!o#tq!p#tq!q#tq#{#tq#|#tq#}#tq$O#tq~O!w!RO!x!RO$R#tq$Z#tq~P!.eO}%dO~O$Z%eO~O}%gO~O$Y%hO~O$V$qOf!gig!gih!gi!O!gi!Q!gi!W!gi!X!gi!Y!gi!Z!gi!_!gi!l!gi!n!gi!o!gi!p!gi!q!gi!w!gi!x!gi#{!gi#|!gi#}!gi$O!gi$R!gi$Z!gi$k!gi~O}%iO~O{#dO~Of#jO$V#jOg!hih!hi!O!hi!Q!hi!W!hi!X!hi!Y!hi!Z!hi!_!hi!l!hi!n!hi!o!hi!p!hi!q!hi!w!hi!x!hi#{!hi#|!hi#}!hi$O!hi$R!hi$Z!hi$k!hi~O{%kO}%kO~O{%pO$m%rO$n%sO$o%tO~OZ%OO$Z#hi~O$l%vO~O!_#xO$Z#hi~P)WO!m%yO~O!_$|O$Z#hi~O!_#xO$Z%{O$k#zO~P)WO!_$|O$Z%{O$k#zO~O$Z%}O~O{&OO~O$Z&PO~P,|O$V&RO$Z&SO~O$Y$YOX#uiY#uii#uij#uik#uil#uim#uin#uio#uip#uiq#uir#uis#ui!v#ui!w#ui!x#ui$U#ui$[#ui$]#ui$^#ui$_#ui$`#ui$a#ui$b#ui$c#ui$d#ui$e#ui$f#ui$g#ui$h#ui$i#ui$j#ui~O$V&UO~O$Z&VO~O}&WO~O$Y&XO~Of#jOg#kO$V#jO!_#ki$k#ki$Z#ki~O!_$|O$Z#hq~O!_#xO$Z#hq~P)WOZ%OO!_&[O$Z#hq~Od|Oe|Of#V!Rg#V!Rh#V!R!O#V!R!l#V!R!n#V!R!o#V!R!p#V!R!q#V!R!w#V!R!x#V!R#{#V!R#|#V!R#}#V!R$O#V!R$R#V!R$Z#V!R$V#V!R~Od|Oe|Of#r!Rg#r!Rh#r!R!O#r!R!l#r!R!n#r!R!o#r!R!p#r!R!q#r!R!w#r!R!x#r!R#{#r!R#|#r!R#}#r!R$O#r!R$R#r!R$Z#r!R$V#r!R~O$Z&_O~P,|O#z%^O$Z&aO~O}&bO~O$Z&cO~O{&dO~O!_$|O$Z#hy~OZ%OO$Z#hy~OU$xO~O!_&[O$Z#hy~O$V&gO~O$Z&hO~O!_$|O$Z#h!R~O}&jO~O$V&kO~O}&lO~O$Z&mO~OP!dOQ!cOR!fOS!eOT!eOV&nOW!kOa!mOb!nOc!oO{!bO$Y!iO~O!_&oOfwagwahwa!lwa!nwa!owa!pwa!qwa!wwa!xwa#{wa#|wa#}wa$Owa$Vwa~P)WO!_&oO$VwX~P#mOf&yOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{#tq#|#tq#}#tq$O#tq$V#tq~Og#tq~P!@pOf#tqg#tqh#tq~P!@vOg&xO~P!@pOf&yOg&xOh&yO!O&}O!l&}O!n&}O!o&}O!p&}O!q&}O!w&zO!x&zO#{&{O#|&{O#}&{O$O&|O~O$V#tq~P!B^O!w&zO!x&zO$V#tq~P!.eO",goto:"1l$RPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$S%R%j&Y&]PPPPPP&t'W'h'v(XPPPP(h(p(yP)S)XP)S)S)[)e)S)m*O*O*XPPPPPP*XP*O*bPPP)S)S*{+R)S)S+Y+])S+c+f+l,_,t-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-Z-p-y.^.j/S/V/V/V/Y/i,_/l,_0R0w1Y1c1fPPPPP,_,_[YOT}!{$U%]Q$^#PQ$_#QS$`#R&tQ$a#SQ$b#TQ$c#UQ'O&rQ'P&sQ'Q&uQ'R&vQ'S&wR'T!Vt^O}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wRyTjSOT}!V!{#P#Q#R#S#T#U$U%]S!t{$QQ#}!u]&q&r&s&t&u&v&wRpPQoP^!hv!i#j#k#x$|&oQ#Y!YS#q!n$vT#u!o$wQxSQ#y!tQ$}#|Q%R#}Q%z%QR&p&q[wS!t#|#}%Q&q]!qx#y$}%R%z&piuSx!t#y#|#}$}%Q%R%z&p&qhtSx!t#y#|#}$}%Q%R%z&p&qR!auksSux!t#y#|#}$}%Q%R%z&p&qQ!^sV#^!`#Z$hW![s!`#Z$hR$j#`Q#_!`Q$f#ZR%f$hV!pv#x&oR#c!cQ#f!cQ#g!dR$o#cU#e!c!d#cR%j$qU!jv#x&oQ#i!iQ$r#jQ$s#kR%w$|_!hv!i#j#k#x$|&o_!gv!i#j#k#x$|&ov]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wT$m#`#aQ#o!lR&i&nS#n!l&nR%l$uR#s!nQ#r!nR%m$vR#w!oQ#v!oR%n$wj^O#P#Q#R#S#T#U&r&s&t&u&v&wQzTQ!z}Q#V!VQ$X!{Q%Z$UR&Q%]w]OT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwVOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wwUOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ!v{Q$O!uR%W$QS#|!t#}W$z#y#{%R%SQ%u$yQ%|%TR&Z%{Q%Q#|Q%u$zQ&]%|R&e&ZQ#{!tS$y#y%RQ%P#|Q%S#}S%x$}%QS&Y%z%|R&f&]R%q$xR%o$xQ!OXQ%V$PQ%[$VQ&^%}R&_&PR$S!xwXOT}!V!{#P#Q#R#S#T#U$U%]&r&s&t&u&v&wQ#P!PQ#Q!QQ#R!RQ#S!SQ#T!TQ#U!UQ&r&xQ&s&yQ&t&zQ&u&{Q&v&|R&w&}h!}!P!Q!R!S!T!U&x&y&z&{&|&}R$]#OQ$Z!|Q%b$[R&T%cR%_$YQ%`$YR&`&R",nodeNames:" Json Logfmt Unpack Pattern Regexp Unwrap LabelFormat LineFormat LabelReplace Vector Offset Bool On Ignoring GroupLeft GroupRight Decolorize Drop Keep By Without And Or Unless Sum Avg Count Max Min Stddev Stdvar Bottomk Topk Sort Sort_Desc LineComment LogQL Expr LogExpr Selector Matchers Matcher Identifier Eq String Neq Re Nre PipelineExpr PipelineStage LineFilters LineFilter Filter PipeExact PipeMatch PipePattern Npa FilterOp Ip OrFilter Pipe LogfmtParser LogfmtParserFlags ParserFlag LabelParser JsonExpressionParser LabelExtractionExpressionList LabelExtractionExpression LogfmtExpressionParser LabelFilter IpLabelFilter UnitFilter DurationFilter Gtr Duration Gte Lss Lte Eql BytesFilter Bytes NumberFilter LiteralExpr Number Add Sub LineFormatExpr LabelFormatExpr LabelsFormat LabelFormatMatcher DecolorizeExpr DropLabelsExpr DropLabels DropLabel KeepLabelsExpr KeepLabels KeepLabel MetricExpr RangeAggregationExpr RangeOp CountOverTime Rate RateCounter BytesOverTime BytesRate AvgOverTime SumOverTime MinOverTime MaxOverTime StddevOverTime StdvarOverTime QuantileOverTime FirstOverTime LastOverTime AbsentOverTime LogRangeExpr Range OffsetExpr UnwrapExpr ConvOp BytesConv DurationConv DurationSecondsConv Grouping Labels VectorAggregationExpr VectorOp BinOpExpr BinOpModifier OnOrIgnoringModifier GroupingLabels GroupingLabelList GroupingLabel LabelName Mul Div Mod Pow LabelReplaceExpr VectorExpr",maxTerm:169,skippedNodes:[0,36],repeatNodeCount:0,tokenData:"<n~RvX^#ipq#iqr$^rs$yst%kuv%vxy%{yz&Qz{&V{|&[|}&a}!O&f!O!P2v!P!Q3v!Q!R3{!R![7^![!]9]!^!_9q!_!`:O!`!a:e!c!}:r!}#O;Y#P#Q;_#Q#R;d#R#S:r#S#T;i#T#o:r#o#p;u#p#q;z#q#r<i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~#nY$T~X^#ipq#i#y#z#i$f$g#i#BY#BZ#i$IS$I_#i$I|$JO#i$JT$JU#i$KV$KW#i&FU&FV#i~$aR!_!`$j!`!a$o#r#s$t~$oO!O~~$tO!Z~~$yO!Q~~$|UOY$yZr$yrs%`s#O$y#O#P%e#P~$y~%eO}~~%hPO~$y~%pQt~OY%kZ~%k~%{O#}~~&QO$Y~~&VO$Z~~&[O#{~~&aO!w~~&fO$V~~&kQ!x~}!O&q!Q![(w~&tQ#_#`&z#g#h(X~&}P#X#Y'Q~'TP#X#Y'W~'ZP#d#e'^~'aP}!O'd~'gP#X#Y'j~'mP#a#b'p~'sP#d#e'v~'yP#h#i'|~(PP#m#n(S~(XO!b~~([P#h#i(_~(bP#f#g(e~(hP#]#^(k~(nP#V#W(q~(tP#h#i(S~(zZ!O!P)m!Q![(w#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~)pP!Q![)s~)vV!Q![)s#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~*bP!m~!Q![*e~*hV!O!P*}!Q![*e#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+QP!Q![+T~+WU!Q![+T#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~+oQ!m~!Q![+u#g#h-Q~+xV!O!P,_!Q![+u#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,bP!Q![,e~,hU!Q![,e#a#b,z#b#c.R#g#h/X#i#j.^${$|.^~,}P#g#h-Q~-VP!m~!Q![-Y~-]T!O!P-l!Q![-Y#b#c.R#i#j.^${$|.^~-oP!Q![-r~-uS!Q![-r#b#c.R#i#j.^${$|.^~.UP#g#h.X~.^O!m~~.aP#g#h.d~.iP!m~!Q![.l~.oR!O!P.x!Q![.l#b#c.R~.{P!Q![/O~/RQ!Q![/O#b#c.R~/^P!m~!Q![/a~/dU!O!P/v!Q![/a#a#b,z#b#c.R#i#j.^${$|.^~/yP!Q![/|~0PT!Q![/|#a#b,z#b#c.R#i#j.^${$|.^~0eP!m~!Q![0h~0kW!O!P)m!Q![0h#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~1YP!m~!Q![1]~1`X!O!P)m!Q![1]#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~2QP!m~!Q![2T~2WY!O!P)m!Q![2T#W#X0`#[#]*]#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T${$|.^~2yP!Q![2|~3RR!v~!Q![2|!g!h3[#X#Y3[~3_R{|3h}!O3h!Q![3n~3kP!Q![3n~3sP!v~!Q![3n~3{O#|~~4Qe!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#l#m8q#m#n1{${$|.^~5hR!v~!Q![5q!g!h3[#X#Y3[~5v`!v~!Q![5q!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^${$|.^~6}O!s~~7QQ!d!e6x#]#^7W~7ZP!d!e6x~7cd!v~!O!P5c!Q![7^!d!e6x!g!h3[!i!j6}!m!n6}!o!p6}!r!s6}!v!w6}#W#X0`#X#Y3[#[#]*]#_#`7W#a#b+j#b#c.R#g#h/X#i#j.^#k#l1T#m#n1{${$|.^~8tR!Q![8}!c!i8}#T#Z8}~9SR!v~!Q![8}!c!i8}#T#Z8}P9bT{P!Q![9]![!]9]!c!}9]#R#S9]#T#o9]~9vP!o~!_!`9y~:OO!p~~:TQ|~!_!`:Z#r#s:`~:`O!q~~:eO!P~~:jP!l~!_!`:m~:rO!n~R:yT{P#zQ!Q![:r![!]9]!c!}:r#R#S:r#T#o:r~;_O$k~~;dO$l~~;iO$O~~;lRO#S;i#S#T%`#T~;i~;zO$U~~<PR!_~!_!`<Y!`!a<_#r#s<d~<_O!W~~<dO!Y~~<iO!X~~<nO$W~",tokenizers:[0,1],topRules:{LogQL:[0,37]},specialized:[{term:43,get:(e,t)=>(e=>a[e.toLowerCase()]||-1)(e)<<1},{term:43,get:(e,t)=>(e=>o[e.toLowerCase()]||-1)(e)<<1|1},{term:43,get:e=>i[e]||-1}],tokenPrec:0}),l=40,u=49,c=98},7348:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});class n{value;next;constructor(e){this.value=e}}class a{#e;#t;#r;constructor(){this.clear()}enqueue(e){const t=new n(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#r++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#r--,e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#r=0}get size(){return this.#r}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}*drain(){for(;this.#e;)yield this.dequeue()}}function o(e){s(e);const t=new a;let r=0;const n=()=>{r<e&&t.size>0&&(t.dequeue()(),r++)},o=async(e,t,a)=>{const o=(async()=>e(...a))();t(o);try{await o}catch{}r--,n()},i=(a,...i)=>new Promise(s=>{((a,i,s)=>{new Promise(e=>{t.enqueue(e)}).then(o.bind(void 0,a,i,s)),(async()=>{await Promise.resolve(),r<e&&n()})()})(a,s,i)});return Object.defineProperties(i,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(a){s(a),e=a,queueMicrotask(()=>{for(;r<e&&t.size>0;)n()})}}}),i}function i(e,t){const{concurrency:r}=t,n=o(r);return(...t)=>n(()=>e(...t))}function s(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}},7909:(e,t,r)=>{"use strict";r.d(t,{S:()=>_});var n=r(9319);class a extends Error{constructor(e,t,r,n){super(r,n),this.error=e,this.response=t,Object.setPrototypeOf(this,a.prototype),this.name=a.name}}class o extends a{constructor(e,t,r){super(e,void 0,t,r),Object.setPrototypeOf(this,o.prototype),this.name=o.name}}class i extends a{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,i.prototype),this.name=i.name}}class s extends a{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,s.prototype),this.name=s.name,this.message=null!=t?t:"OFREP request failed: unauthorized"}}class l extends a{constructor(e,t,r){super(void 0,e,t,r),Object.setPrototypeOf(this,l.prototype),this.name=l.name,this.message=null!=t?t:"OFREP request failed: forbidden"}}class u extends a{constructor(e,t,r){super(void 0,e,t,r),this.response=e,Object.setPrototypeOf(this,u.prototype),this.name=u.name,this.requestTime=new Date,this.message=(null!=t?t:this.retryAfterDate)?`rate limit exceeded, try again after ${this.retryAfterDate}`:"rate limit exceeded, try again later"}get retryAfterHeader(){return this.response.headers.get("Retry-After")}get retryAfterSeconds(){if(!this.retryAfterHeader)return null;const e=Number.parseInt(this.retryAfterHeader,10);return Number.isFinite(e)?e:null}get retryAfterDate(){if(!this.retryAfterHeader)return null;if(this.retryAfterSeconds){return this.retryAfterSeconds?new Date(this.requestTime.getTime()+1e3*this.retryAfterSeconds):null}const e=new Date(this.retryAfterHeader);return isNaN(e.valueOf())?null:e}}function c(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function O(e){return!(!e||"object"!=typeof e)&&("key"in e&&"string"==typeof e.key&&"errorCode"in e&&"string"==typeof e.errorCode)}"function"==typeof SuppressedError&&SuppressedError;const d=[400,404,500],h=[200];function p(e){return c(this,arguments,void 0,function*(e,t=null){var r;return new Headers([["Content-Type","application/json; charset=utf-8"],...(null==e?void 0:e.headers)||[],...(yield null===(r=null==e?void 0:e.headersFactory)||void 0===r?void 0:r.call(e))||[],...t?[["If-None-Match",t]]:[]])})}const f={[n.O4.FLAG_NOT_FOUND]:"Flag was not found",[n.O4.GENERAL]:"General error",[n.O4.INVALID_CONTEXT]:"Context is invalid or could be parsed",[n.O4.PARSE_ERROR]:"Flag or flag configuration could not be parsed",[n.O4.PROVIDER_FATAL]:"Provider is in a fatal error state",[n.O4.PROVIDER_NOT_READY]:"Provider is not yet ready",[n.O4.TARGETING_KEY_MISSING]:"Targeting key is missing",[n.O4.TYPE_MISMATCH]:"Flag is not of expected type"};class v{constructor(e,t=function(){return globalThis?globalThis.fetch.bind(globalThis):window?window.fetch.bind(window):(self&&self.fetch.bind(self),fetch)}()){this.baseOptions=e,this.fetchImplementation=t}isJsonMime(e){const t=e.headers.get("Content-Type");return!!t&&v.jsonRegex.test(t)}static isOFREFErrorHttpStatus(e){return d.includes(e)}static isOFREFSuccessHttpStatus(e){return h.includes(e)}doFetchRequest(e){return c(this,void 0,void 0,function*(){var t;let r;try{const n=null!==(t=this.baseOptions.timeoutMs)&&void 0!==t?t:1e4,a=new AbortController;setTimeout(()=>a.abort(new DOMException(`This signal is timeout in ${n}ms`,"TimeoutError")),n),r=yield this.fetchImplementation(e,{signal:a.signal})}catch(e){throw new o(e,"The OFREP request failed.",{cause:e})}if(401===r.status)throw new s(r);if(403===r.status)throw new l(r);if(429===r.status)throw new u(r);if(200===r.status&&!this.isJsonMime(r))throw new i(r,"OFREP did not respond with expected MIME application/json");try{return{response:r,body:yield r.json()}}catch(e){return{response:r}}})}postEvaluateFlag(e,t){return c(this,void 0,void 0,function*(){let r=`${this.baseOptions.baseUrl}/ofrep/v1/evaluate/flags/${e}`;this.baseOptions.query&&(r+=`?${this.baseOptions.query.toString()}`);const n=new Request(r,{headers:yield p(this.baseOptions),method:"POST",body:JSON.stringify(null!=t?t:{})}),{response:a,body:o}=yield this.doFetchRequest(n);if(200===a.status&&o&&!O(o))return{httpStatus:a.status,value:o,httpResponse:a};if(v.isOFREFErrorHttpStatus(a.status)&&O(o))return{httpStatus:a.status,value:o,httpResponse:a};throw new i(a,"The OFREP response does not match the expected format")})}postBulkEvaluateFlags(e){return c(this,arguments,void 0,function*(e,t=null){let r=`${this.baseOptions.baseUrl}/ofrep/v1/evaluate/flags`;this.baseOptions.query&&(r+=`?${this.baseOptions.query.toString()}`);const n=new Request(r,{headers:yield p(this.baseOptions,t),method:"POST",body:JSON.stringify(null!=e?e:{})}),{response:a,body:o}=yield this.doFetchRequest(n);if(200===a.status&&function(e){return!(!e||"object"!=typeof e)&&"flags"in e}(o))return{httpStatus:a.status,value:o,httpResponse:a};if(304===a.status)return{httpStatus:a.status,value:void 0,httpResponse:a};if(v.isOFREFErrorHttpStatus(a.status)&&function(e){return!(!e||"object"!=typeof e)&&"errorCode"in e}(o))return{httpStatus:a.status,value:o,httpResponse:a};throw new i(a,"The OFREP response does not match the expected format")})}}function g(e){if(!e)return;const t=Object.entries(e).filter(([,e])=>["string","number","boolean"].includes(typeof e));return Object.fromEntries(t)}v.jsonRegex=new RegExp(/application\/[^+]*[+]?(json);?.*/,"i");var m,$=r(5561);function P(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError,function(e){e.SUCCESS_NO_CHANGES="SUCCESS_NO_CHANGES",e.SUCCESS_WITH_CHANGES="SUCCESS_WITH_CHANGES"}(m||(m={}));class _{constructor(e,t){var r;this.DEFAULT_POLL_INTERVAL=3e4,this.metadata={name:"OpenFeature Remote Evaluation Protocol Web Provider"},this.runsOn="client",this.events=new $.by,this._flagCache={},this._options=e,this._logger=t,this._etag=null,this._ofrepAPI=new v(this._options,this._options.fetchImplementation),this._pollingInterval=null!==(r=this._options.pollInterval)&&void 0!==r?r:this.DEFAULT_POLL_INTERVAL}get flagCache(){return Object.assign({},this._flagCache)}initialize(e){return P(this,void 0,void 0,function*(){var t;try{this._context=e,yield this._fetchFlags(e),this._pollingInterval>0&&this.startPolling(),null===(t=this._logger)||void 0===t||t.debug(`${this.metadata.name} initialized successfully`)}catch(e){if(e instanceof s||e instanceof l)throw new $.wh("Initialization failed",{cause:e});throw e}})}resolveBooleanEvaluation(e,t,r){return this._resolve(e,t)}resolveStringEvaluation(e,t,r){return this._resolve(e,t)}resolveNumberEvaluation(e,t,r){return this._resolve(e,t)}resolveObjectEvaluation(e,t,r){return this._resolve(e,t)}onContextChange(e,t){return P(this,void 0,void 0,function*(){var e,r,n;try{this._context=t;const e=new Date;if(void 0!==this._retryPollingAfter&&this._retryPollingAfter>e)return;yield this._fetchFlags(t)}catch(t){if(t instanceof u)return void(null===(e=this.events)||void 0===e||e.emit($.Uc.Stale,{message:`${t.name}: ${t.message}`}));if(t instanceof $.Lh||t instanceof o||t instanceof s||t instanceof l)return void(null===(r=this.events)||void 0===r||r.emit($.Uc.Error,{message:`${t.name}: ${t.message}`}));null===(n=this.events)||void 0===n||n.emit($.Uc.Error,{message:`Unknown error: ${t}`})}})}onClose(){return this.stopPolling(),Promise.resolve()}_fetchFlags(e){return P(this,void 0,void 0,function*(){var t;try{const r={context:e},n=yield this._ofrepAPI.postBulkEvaluateFlags(r,this._etag);if(304===n.httpStatus)return{status:m.SUCCESS_NO_CHANGES,flags:[]};if(200!==n.httpStatus)throw new $.$g(`Failed OFREP bulk evaluation request, status: ${n.httpStatus}`);const a=n.value;if(!("flags"in a)||!Array.isArray(a.flags))throw new Error("No flags in OFREP bulk evaluation response");const o=a.flags.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{}),i=this._getListUpdatedFlags(this._flagCache,o);return this._flagCache=o,this._etag=null===(t=n.httpResponse)||void 0===t?void 0:t.headers.get("etag"),this._flagSetMetadataCache=g("object"==typeof a.metadata?a.metadata:{}),{status:m.SUCCESS_WITH_CHANGES,flags:i}}catch(e){throw e instanceof u&&null!==e.retryAfterDate&&(this._retryPollingAfter=e.retryAfterDate),e}})}_getListUpdatedFlags(e,t){const r=[],n=Object.keys(e),a=Object.keys(t);for(const a in t)-1!==n.indexOf(a)&&JSON.stringify(e[a])===JSON.stringify(t[a])||r.push(a);for(const t in e)-1===a.indexOf(t)&&r.push(t);return r}_resolve(e,t){const r=this._flagCache[e];return r?this.responseToResolutionDetails(r,t):{value:t,flagMetadata:this._flagSetMetadataCache,reason:$.$W.ERROR,errorCode:$.O4.FLAG_NOT_FOUND,errorMessage:f[$.O4.FLAG_NOT_FOUND]}}responseToResolutionDetails(e,t){return O(e)?function(e,t,r){var a,o,i;if(null==r||r(e),"errorCode"in e){const r=null!==(a=e.errorCode)&&void 0!==a?a:n.O4.GENERAL,s=null!==(i=null!==(o=e.errorDetails)&&void 0!==o?o:f[e.errorCode])&&void 0!==i?i:e.errorCode,l=g(e.metadata);return{value:t,reason:n.$W.ERROR,flagMetadata:l,errorCode:r,errorMessage:s}}throw e}(e,t):function(e,t){return void 0===e.value?{value:t,variant:e.variant,flagMetadata:e.metadata,reason:e.reason||n.$W.DEFAULT}:typeof e.value!=typeof t?{value:t,reason:n.$W.ERROR,flagMetadata:e.metadata,errorCode:n.O4.TYPE_MISMATCH,errorMessage:f[n.O4.TYPE_MISMATCH]}:{value:e.value,variant:e.variant,reason:e.reason,flagMetadata:g(e.metadata)}}(e,t)}startPolling(){this._pollingIntervalId=setInterval(()=>P(this,void 0,void 0,function*(){var e,t;try{const t=new Date;if(void 0!==this._retryPollingAfter&&this._retryPollingAfter>t)return;const r=yield this._fetchFlags(this._context);r.status===m.SUCCESS_WITH_CHANGES&&(null===(e=this.events)||void 0===e||e.emit($.Uc.ConfigurationChanged,{message:"Flags updated",flagsChanged:r.flags}))}catch(e){null===(t=this.events)||void 0===t||t.emit($.Uc.Stale,{message:`Error while polling: ${e}`})}}),this._pollingInterval)}stopPolling(){this._pollingIntervalId&&clearInterval(this._pollingIntervalId)}}},8162:(e,t,r)=>{"use strict";r.d(t,{r4:()=>a,md:()=>o,GH:()=>n});const n={x_over_time:(e,t,r="$__range",n="")=>`${e}_over_time((${t})[${r}:${n}])`,avg_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("avg",e,t,r),count_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("count",e,t,r),last_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("last",e,t,r),max_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("max",e,t,r),min_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("min",e,t,r),present_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("present",e,t,r),stddev_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stddev",e,t,r),stdvar_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("stdvar",e,t,r),sum_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("sum",e,t,r),quantile_over_time:({expr:e,range:t,interval:r})=>n.x_over_time("quantile",e,t,r),offset:({units:e})=>(e=>{let t="";for(const[r,n]of Object.entries(e))n>0&&(t+=`${n}${r}`);return t.length?`offset ${t}`:""})(e),by:e=>e?` by (${e.join(", ")}) `:"",without:e=>e?` without (${e.join(", ")}) `:"",byOrWithout:({by:e,without:t})=>e?n.by(e):n.without(t),sum:({expr:e,by:t,without:r})=>`sum${n.byOrWithout({by:t,without:r})}(${e})`,min:({expr:e,by:t,without:r})=>`min${n.byOrWithout({by:t,without:r})}(${e})`,max:({expr:e,by:t,without:r})=>`max${n.byOrWithout({by:t,without:r})}(${e})`,avg:({expr:e,by:t,without:r})=>`avg${n.byOrWithout({by:t,without:r})}(${e})`,group:({expr:e,by:t,without:r})=>`group${n.byOrWithout({by:t,without:r})}(${e})`,count:({expr:e,by:t,without:r})=>`count${n.byOrWithout({by:t,without:r})}(${e})`,stddev:({expr:e,by:t,without:r})=>`stddev${n.byOrWithout({by:t,without:r})}(${e})`,stdvar:({expr:e,by:t,without:r})=>`stdvar${n.byOrWithout({by:t,without:r})}(${e})`,count_values:({expr:e,by:t,without:r,parameter:a})=>`count_values${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,bottomk:({expr:e,by:t,without:r,parameter:a})=>`bottomk${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,topk:({expr:e,by:t,without:r,parameter:a})=>`topk${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,quantile:({expr:e,by:t,without:r,parameter:a})=>`quantile${n.byOrWithout({by:t,without:r})}(${a}, ${e})`,and:({left:e,right:t})=>`${e} and ${t}`,or:({left:e,right:t})=>`${e} or ${t}`,unless:({left:e,right:t})=>`${e} unless ${t}`,rate:({expr:e,interval:t="$__rate_interval"})=>`rate(${e}[${t}])`,increase:({expr:e,interval:t="$__range"})=>`increase(${e}[${t}])`,label_replace:({expr:e,newLabel:t,existingLabel:r,replacement:n="$1",regex:a="(.*)"})=>`label_replace(${e}, "${t}", "${n}", "${r}", "${a}")`,label_join:({expr:e,newLabel:t,separator:r=",",labels:n})=>`label_join(${e}, "${t}", "${r}", ${n.map(e=>`"${e}"`).join(", ")})`};class a{metric;selectors=new Map;constructor(e){this.metric=e.metric,e.defaultSelectors?.forEach(e=>this.setSelector(e));for(const[t,r]of Object.entries(e.values))void 0!==r&&this.selectors.set(t,[{operator:e.defaultOperator,label:t,value:r}])}setSelector(e){const t=this.selectors.get(e.label)||[];return t.push(e),this.selectors.set(e.label,t),this}toString(){const e=Array.from(this.selectors).flatMap(([e,t])=>t.map(t=>`${e}${t.operator}"${t.value}"`)).join(", ");return`${this.metric}{${e}}`}}var o;!function(e){e.equal="=",e.notEqual="!=",e.regexMatch="=~",e.notRegexMatch="!~"}(o||(o={}))},9319:(e,t,r)=>{"use strict";r.d(t,{$W:()=>p,$g:()=>m,$l:()=>R,Lh:()=>v,O4:()=>f,Uc:()=>w,VL:()=>I,XD:()=>N,_V:()=>b,_e:()=>X,eD:()=>h,g7:()=>L,j:()=>k,l6:()=>Q,qM:()=>A,sN:()=>C,wh:()=>_});var n=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&u(e,r,t[r]);if(i)for(var r of i(t))l.call(t,r)&&u(e,r,t[r]);return e},O=(e,t)=>a(e,o(t)),d=(e,t,r)=>new Promise((n,a)=>{var o=e=>{try{s(r.next(e))}catch(e){a(e)}},i=e=>{try{s(r.throw(e))}catch(e){a(e)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);s((r=r.apply(e,t)).next())}),h=class{constructor(){this.data=new Map}set(e,t){this.data.set(e,t)}get(e){return this.data.get(e)}has(e){return this.data.has(e)}delete(e){return this.data.delete(e)}clear(){this.data.clear()}},p={STATIC:"STATIC",DEFAULT:"DEFAULT",TARGETING_MATCH:"TARGETING_MATCH",SPLIT:"SPLIT",CACHED:"CACHED",DISABLED:"DISABLED",UNKNOWN:"UNKNOWN",STALE:"STALE",ERROR:"ERROR"},f=(e=>(e.PROVIDER_NOT_READY="PROVIDER_NOT_READY",e.PROVIDER_FATAL="PROVIDER_FATAL",e.FLAG_NOT_FOUND="FLAG_NOT_FOUND",e.PARSE_ERROR="PARSE_ERROR",e.TYPE_MISMATCH="TYPE_MISMATCH",e.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",e.INVALID_CONTEXT="INVALID_CONTEXT",e.GENERAL="GENERAL",e))(f||{}),v=class e extends Error{constructor(t,r){super(t),Object.setPrototypeOf(this,e.prototype),this.name="OpenFeatureError",this.cause=null==r?void 0:r.cause}},g=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="FlagNotFoundError",this.code="FLAG_NOT_FOUND"}},m=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="GeneralError",this.code="GENERAL"}},$=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="InvalidContextError",this.code="INVALID_CONTEXT"}},P=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ParseError",this.code="PARSE_ERROR"}},_=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}},b=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},y=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TargetingKeyMissingError",this.code="TARGETING_KEY_MISSING"}},E=class e extends v{constructor(t,r){super(t,r),Object.setPrototypeOf(this,e.prototype),this.name="TypeMismatchError",this.code="TYPE_MISMATCH"}},Q=(e,t)=>{switch(e){case"FLAG_NOT_FOUND":return new g(t);case"PARSE_ERROR":return new P(t);case"TYPE_MISMATCH":return new E(t);case"TARGETING_KEY_MISSING":return new y(t);case"INVALID_CONTEXT":return new $(t);case"PROVIDER_NOT_READY":return new b(t);case"PROVIDER_FATAL":return new _(t);default:return new m(t)}},R=(e=>(e.NOT_READY="NOT_READY",e.READY="READY",e.ERROR="ERROR",e.STALE="STALE",e.FATAL="FATAL",e.RECONCILING="RECONCILING",e))(R||{}),w=(e=>(e.Ready="PROVIDER_READY",e.Error="PROVIDER_ERROR",e.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",e.ContextChanged="PROVIDER_CONTEXT_CHANGED",e.Reconciling="PROVIDER_RECONCILING",e.Stale="PROVIDER_STALE",e))(w||{}),x={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},X=(e,t)=>!t&&"PROVIDER_READY"===e||x[t]===e,S=class{error(...e){console.error(...e)}warn(...e){console.warn(...e)}info(){}debug(){}},T=["error","warn","info","debug"],A=class{constructor(e){this.fallbackLogger=new S;try{for(const t of T)if(!e[t]||"function"!=typeof e[t])throw new Error(`The provided logger is missing the ${t} method.`);this.logger=e}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...e){this.log("error",...e)}warn(...e){this.log("warn",...e)}info(...e){this.log("info",...e)}debug(...e){this.log("debug",...e)}log(e,...t){try{this.logger[e](...t)}catch(r){this.fallbackLogger[e](...t)}}},C=class{constructor(e){this.globalLogger=e,this._handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap}}emit(e,t){this.eventEmitter.emit(e,t)}addHandler(e,t){const r=e=>d(this,null,function*(){var r;try{yield t(e)}catch(e){null==(r=this._logger)||r.error("Error running event handler:",e)}}),n=this._handlers[e].get(t);this._handlers[e].set(t,[...n||[],r]),this.eventEmitter.on(e,r)}removeHandler(e,t){const r=this._handlers[e].get(t);if(r){const t=r.pop();t&&this.eventEmitter.removeListener(e,t)}}removeAllHandlers(e){e?this.eventEmitter.removeAllListeners(e):this.eventEmitter.removeAllListeners()}getHandlers(e){return this.eventEmitter.listeners(e)}setLogger(e){return this._eventLogger=new A(e),this}get _logger(){var e,t;return null!=(t=this._eventLogger)?t:null==(e=this.globalLogger)?void 0:e.call(this)}};function k(e){return function(e){return"string"==typeof e}(e)?e:void 0}function N(e){return function(e){return"object"==typeof e}(e)?e:void 0}function D(e){return null!=e}var I=class{constructor(e,t,r){var n,a,o;this._provider=e,this._status=t,this._pendingContextChanges=0,null==(n=e.events)||n.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),null==(a=e.events)||a.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),null==(o=e.events)||o.addHandler("PROVIDER_ERROR",e=>{"PROVIDER_FATAL"===(null==e?void 0:e.errorCode)?this._status=r.FATAL:this._status=r.ERROR})}get provider(){return this._provider}set provider(e){this._provider=e}get status(){return this._status}set status(e){this._status=e}get allContextChangesSettled(){return 0===this._pendingContextChanges}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},L=class{constructor(e){this._hooks=[],this._context={},this._logger=new S,this._clientEventHandlers=new Map,this._domainScopedContext=new Map,this._clientEvents=new Map,this._runsOn=e}addHooks(...e){return this._hooks=[...this._hooks,...e],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(e){return this._logger=new A(e),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(e){return this.getProviderForClient(e).metadata}addHandler(e,t,r){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{var n;const a=r[0],o=r[1].provider,i=r[1].status;if(X(e,i))try{t({domain:a,providerName:o.metadata.name})}catch(e){null==(n=this._logger)||n.error("Error running event handler:",e)}}),this._apiEmitter.addHandler(e,t),(null==r?void 0:r.signal)&&"function"==typeof r.signal.addEventListener&&r.signal.addEventListener("abort",()=>{this.removeHandler(e,t)})}removeHandler(e,t){this._apiEmitter.removeHandler(e,t)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(e){return this._apiEmitter.getHandlers(e)}setAwaitableProvider(e,t){var r,n,a,o,i,s,l,u;const c=k(e),O=null!=(r=N(e))?r:N(t);if(!O)return void this._logger.debug("No provider defined, ignoring setProvider call");const d=this.getProviderForClient(c),h=O.metadata.name;if(d===O)return void this._logger.debug("Provider is already set, ignoring setProvider call");if(O.runsOn){if(O.runsOn!==this._runsOn)throw new m(`Provider '${O.metadata.name}' is intended for use on the ${O.runsOn}.`)}else this._logger.debug(`Provider '${O.metadata.name}' has not defined its intended use.`);const p=this.getAssociatedEventEmitters(c);let f;const v=new I(O,this._statusEnumType.NOT_READY,this._statusEnumType);return"function"!=typeof O.initialize||this.allProviders.includes(O)?(v.status=this._statusEnumType.READY,p.forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}),null==(s=this._apiEmitter)||s.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})):f=null==(i=null==(o=null==(a=O.initialize)?void 0:a.call(O,c&&null!=(n=this._domainScopedContext.get(c))?n:this._context))?void 0:o.then(()=>{var e;v.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(c).forEach(e=>{null==e||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}),null==(e=this._apiEmitter)||e.emit("PROVIDER_READY",{clientName:c,domain:c,providerName:h})}))?void 0:i.catch(e=>{var t;throw"PROVIDER_FATAL"===(null==e?void 0:e.code)?v.status=this._statusEnumType.FATAL:v.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(c).forEach(t=>{null==t||t.emit("PROVIDER_ERROR",{clientName:c,domain:c,providerName:h,message:null==e?void 0:e.message})}),null==(t=this._apiEmitter)||t.emit("PROVIDER_ERROR",{clientName:c,domain:c,providerName:h,message:null==e?void 0:e.message}),e}),c?this._domainScopedProviders.set(c,v):this._defaultProvider=v,this.transferListeners(d,O,c,p),this.allProviders.includes(d)||null==(u=null==(l=null==d?void 0:d.onClose)?void 0:l.call(d))||u.catch(e=>{this._logger.error(`error closing provider: ${null==e?void 0:e.message}, ${null==e?void 0:e.stack}`)}),f}getProviderForClient(e){var t,r;return e&&null!=(r=null==(t=this._domainScopedProviders.get(e))?void 0:t.provider)?r:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(e){const t=this._clientEvents.get(e);if(t)return t;const r=this._createEventEmitter();this._clientEvents.set(e,r);const n=this.getProviderForClient(e);return Object.values(w).forEach(t=>{var a;return null==(a=n.events)?void 0:a.addHandler(t,a=>d(this,null,function*(){r.emit(t,O(c({},a),{clientName:e,domain:e,providerName:n.metadata.name}))}))}),r}getUnboundEmitters(){const e=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(D).filter(t=>!e.includes(t)).map(e=>this._clientEvents.get(e)),this._clientEvents.get(void 0)].filter(D)}getAssociatedEventEmitters(e){return e?[this.buildAndCacheEventEmitterForClient(e)]:this.getUnboundEmitters()}transferListeners(e,t,r,n){var a;null==(a=this._clientEventHandlers.get(r))||a.forEach(t=>{var r;return null==(r=e.events)?void 0:r.removeHandler(...t)});const o=Object.values(w).map(e=>[e,a=>d(this,null,function*(){n.forEach(n=>{null==n||n.emit(e,O(c({},a),{clientName:r,domain:r,providerName:t.metadata.name}))}),this._apiEmitter.emit(e,O(c({},a),{clientName:r,domain:r,providerName:t.metadata.name}))})]);this._clientEventHandlers.set(r,o),o.forEach(e=>{var r;return null==(r=t.events)?void 0:r.addHandler(...e)})}close(){return d(this,null,function*(){var e,t;try{yield null==(t=null==(e=null==this?void 0:this._defaultProvider.provider)?void 0:e.onClose)?void 0:t.call(e)}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}const r=Array.from(this._domainScopedProviders);yield Promise.all(r.map(e=>d(this,[e],function*([,e]){var t,r;try{yield null==(r=null==e?void 0:(t=e.provider).onClose)?void 0:r.call(t)}catch(t){this.handleShutdownError(null==e?void 0:e.provider,t)}})))})}clearProvidersAndSetDefault(e){return d(this,null,function*(){try{yield this.close()}catch(e){this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new I(e,this._statusEnumType.NOT_READY,this._statusEnumType)}})}get allProviders(){return[...[...this._domainScopedProviders.values()].map(e=>e.provider),this._defaultProvider.provider]}handleShutdownError(e,t){this._logger.error(`Error during shutdown of provider ${e.metadata.name}: ${t}`),this._logger.error(null==t?void 0:t.stack)}}}}]);
//# sourceMappingURL=204.js.map?_cache=a5e1e43a30242b60d7bf