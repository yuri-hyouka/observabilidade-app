"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[452],{2993:(e,t,a)=>{a.d(t,{E:()=>s});var n=a(6089),r=a(2007),l=a(5959),o=a.n(l),c=a(1159),i=a(6503);function s({error:e}){const t=(0,r.useStyles2)(m),a=(0,c.useNavigate)(),{pathname:n,search:s}=(0,c.useLocation)(),u=(0,l.useCallback)(()=>{const e=new URLSearchParams(s),t=new URLSearchParams;["from","to","timezone"].filter(t=>e.has(t)).forEach(a=>t.set(a,e.get(a))),a({pathname:n,search:t.toString()}),window.location.reload()},[a,n,s]),[d,p]=(0,l.useState)(!1);return o().createElement("div",{className:t.container},o().createElement(i._,{severity:"error",title:"Fatal error!",error:e,errorContext:{handheldBy:"React error boundary"},message:o().createElement(o().Fragment,null,o().createElement("p",{className:t.message},"Please"," ",o().createElement(r.TextLink,{href:"#",onClick:u},"try reloading the page")," ","or, if the problem persists, contact your organization admin. Sorry for the inconvenience."),o().createElement("p",null,o().createElement(r.Collapse,{className:t.callStack,label:"View stack trace",isOpen:d,onToggle:()=>p(!d)},o().createElement("pre",null,o().createElement("code",null,e.stack)))))}))}function m(e){return{container:(0,n.css)({margin:e.spacing(2)}),message:(0,n.css)({margin:e.spacing(2,0,1,0)}),callStack:(0,n.css)({backgroundColor:"transparent",border:"0 none","& button":(0,n.css)({paddingLeft:e.spacing(1.5)}),"& button:focus":(0,n.css)({outline:"none",boxShadow:"none"}),"& button > svg":(0,n.css)({marginLeft:e.spacing(-2),marginRight:e.spacing(.5)}),'& [class$="collapse__loader"]':(0,n.css)({display:"none"})})}}},4787:(e,t,a)=>{a.d(t,{_:()=>o});var n=a(7781),r=a(3014);function l(e){return"string"==typeof e&&n.dateMath.isMathString(e)?e:n.dateMath.toDateTime(new Date(e),{roundUp:!1}).toISOString()}function o(e,t){return new r.SceneTimeRange({from:l(e),to:l(t)})}},7452:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(5959),r=a.n(n),l=a(2993),o=a(8732),c=a(1522),i=a(5935),s=a(7616),m=a(3781),u=a(4787);const d=({query:e,initialStart:t,initialEnd:a,dataSource:d})=>{const[p]=(0,c.n)(),g=(0,n.useRef)(!1);(0,n.useEffect)(()=>{g.current||(g.current=!0,(0,i.z)("exposed_component_viewed",{component:"label_breakdown"}))},[]);const{metric:h,labels:f}=(0,m.$9)(e),b=(0,s.ef)({metric:h,initialDS:d.uid,initialFilters:f.map(({label:e,op:t,value:a})=>({key:e,operator:t,value:a})),$timeRange:(0,u._)(t,a),embedded:!0});return r().createElement("div",{"data-testid":"metrics-drilldown-embedded-label-breakdown"},p?r().createElement(l.E,{error:p}):r().createElement(o.X,{trail:b}))}},8092:(e,t,a)=>{a.d(t,{BR:()=>l,Hi:()=>o,KF:()=>r});var n=a(5959);const r=(0,a(7616).ef)(),l=(0,n.createContext)({trail:r});function o(){return(0,n.useContext)(l)}},8732:(e,t,a)=>{a.d(t,{S:()=>m,X:()=>i});var n=a(5959),r=a.n(n),l=a(1159),o=a(3498),c=a(8092);const i=(0,n.lazy)(()=>a.e(494).then(a.bind(a,8494))),s=()=>{const e=(0,l.useLocation)();return r().createElement(l.Navigate,{to:`${o.b.Drilldown}${e.search}`,replace:!0})},m=()=>{const{trail:e}=(0,c.Hi)();return r().createElement(l.Routes,null,r().createElement(l.Route,{path:o.b.Drilldown,element:r().createElement(i,{trail:e})}),r().createElement(l.Route,{path:o.b.Trail,element:r().createElement(s,null)}),r().createElement(l.Route,{path:"*",element:r().createElement(l.Navigate,{to:o.b.Drilldown,replace:!0})}))}}}]);
//# sourceMappingURL=452.js.map?_cache=f9b334f400470b8ac4d9